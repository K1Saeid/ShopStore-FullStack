"use strict";(self.webpackChunkshop_web=self.webpackChunkshop_web||[]).push([[228],{4228:(k,p,s)=>{s.r(p),s.d(p,{OrdersComponent:()=>C});var c=s(2881),d=s(4341),u=s(9870),g=s(262),e=s(1360),_=s(8674);const O=r=>["/admin/customers",r],h=r=>["/admin/orders",r];function b(r,l){if(1&r){const t=e.RV6();e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td",9),e.EFF(6),e.k0s(),e.j41(7,"td"),e.EFF(8),e.nI1(9,"date"),e.k0s(),e.j41(10,"td"),e.EFF(11),e.k0s(),e.j41(12,"td")(13,"span",10),e.EFF(14),e.k0s()(),e.j41(15,"td")(16,"button",11),e.EFF(17," View "),e.k0s(),e.j41(18,"button",12),e.bIt("click",function(){const n=e.eBV(t).$implicit,i=e.XpG();return e.Njj(i.openStatusModal(n))}),e.EFF(19," Update "),e.k0s()()()}if(2&r){const t=l.$implicit;e.R7$(2),e.JRh(t.id),e.R7$(2),e.JRh(t.orderNumber),e.R7$(),e.Y8G("routerLink",e.eq3(17,O,t.user.id)),e.R7$(),e.JRh(null==t.user?null:t.user.fullName),e.R7$(2),e.JRh(e.i5U(9,14,t.createdAt,"medium")),e.R7$(3),e.SpI("\u20ac",t.totalPrice,""),e.R7$(2),e.AVh("pending","Pending"===t.status)("paid","Paid"===t.status)("cancelled","Cancelled"===t.status),e.R7$(),e.SpI(" ",t.status," "),e.R7$(2),e.Y8G("routerLink",e.eq3(19,h,t.id))}}function m(r,l){if(1&r){const t=e.RV6();e.j41(0,"div",13),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.closeStatusModal())}),e.k0s()}}function f(r,l){if(1&r){const t=e.RV6();e.j41(0,"div",14)(1,"div",15),e.bIt("click",function(n){return e.eBV(t),e.Njj(n.stopPropagation())}),e.j41(2,"h3"),e.EFF(3,"Update Order Status"),e.k0s(),e.j41(4,"select",16),e.mxI("ngModelChange",function(n){e.eBV(t);const i=e.XpG();return e.DH7(i.selectedStatus,n)||(i.selectedStatus=n),e.Njj(n)}),e.j41(5,"option",17),e.EFF(6,"Pending"),e.k0s(),e.j41(7,"option",18),e.EFF(8,"Paid"),e.k0s(),e.j41(9,"option",19),e.EFF(10,"Cancelled"),e.k0s()(),e.j41(11,"div",20)(12,"button",21),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.saveStatus())}),e.EFF(13,"Save"),e.k0s(),e.j41(14,"button",22),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.closeStatusModal())}),e.EFF(15,"Cancel"),e.k0s()()()()}if(2&r){const t=e.XpG();e.R7$(4),e.R50("ngModel",t.selectedStatus)}}let C=(()=>{class r{orderService;page=1;pageSize=8;orders=[];searchText="";loading=!0;modalOpen=!1;selectedOrder=null;selectedStatus="Pending";constructor(t){this.orderService=t}ngOnInit(){this.orderService.getAllOrder().subscribe(t=>{this.orders=t,this.loading=!1})}loadOrders(){this.orderService.getAllOrders().subscribe(t=>{this.orders=t})}openStatusModal(t){this.selectedOrder=t,this.selectedStatus=t.status,this.modalOpen=!0}closeStatusModal(){this.modalOpen=!1}saveStatus(){this.orderService.updateOrderStatus(this.selectedOrder.id,this.selectedStatus).subscribe(()=>{this.selectedOrder.status=this.selectedStatus,this.modalOpen=!1})}get filteredOrders(){if(!this.searchText.trim())return this.orders;const t=this.searchText.toLowerCase();return this.orders.filter(o=>o.orderNumber.toLowerCase().includes(t)||o.user?.fullName?.toLowerCase().includes(t)||o.status?.toLowerCase().includes(t))}get pagedOrders(){const t=(this.page-1)*this.pageSize;return this.filteredOrders.slice(t,t+this.pageSize)}static \u0275fac=function(o){return new(o||r)(e.rXU(_.Q))};static \u0275cmp=e.VBU({type:r,selectors:[["app-admin-orders"]],decls:28,vars:7,consts:[[1,"orders-container"],[1,"page-header"],["type","text","placeholder","Search orders...",3,"ngModelChange","ngModel"],[1,"orders-table-wrapper"],[1,"orders-table"],[4,"ngFor","ngForOf"],[3,"currentPageChange","totalItems","pageSize","currentPage"],["class","modal-backdrop",3,"click",4,"ngIf"],["class","modal",4,"ngIf"],[1,"user",3,"routerLink"],[1,"status"],[1,"btn-view",3,"routerLink"],[1,"btn-edit",3,"click"],[1,"modal-backdrop",3,"click"],[1,"modal"],[1,"modal-content",3,"click"],[1,"form-select",3,"ngModelChange","ngModel"],["value","Pending"],["value","Paid"],["value","Cancelled"],[1,"modal-actions"],[1,"btn-save",3,"click"],[1,"btn-cancel",3,"click"]],template:function(o,n){1&o&&(e.j41(0,"div",0)(1,"div",1)(2,"h2"),e.EFF(3,"Orders"),e.k0s(),e.j41(4,"input",2),e.mxI("ngModelChange",function(a){return e.DH7(n.searchText,a)||(n.searchText=a),a}),e.k0s()(),e.j41(5,"div",3)(6,"table",4)(7,"thead")(8,"tr")(9,"th"),e.EFF(10,"ID"),e.k0s(),e.j41(11,"th"),e.EFF(12,"Order Number"),e.k0s(),e.j41(13,"th"),e.EFF(14,"User"),e.k0s(),e.j41(15,"th"),e.EFF(16,"Date"),e.k0s(),e.j41(17,"th"),e.EFF(18,"Total"),e.k0s(),e.j41(19,"th"),e.EFF(20,"Status"),e.k0s(),e.j41(21,"th"),e.EFF(22,"Actions"),e.k0s()()(),e.j41(23,"tbody"),e.DNE(24,b,20,21,"tr",5),e.k0s()()(),e.j41(25,"app-pagination",6),e.mxI("currentPageChange",function(a){return e.DH7(n.page,a)||(n.page=a),a}),e.k0s()(),e.DNE(26,m,1,0,"div",7)(27,f,16,1,"div",8)),2&o&&(e.R7$(4),e.R50("ngModel",n.searchText),e.R7$(20),e.Y8G("ngForOf",n.pagedOrders),e.R7$(),e.Y8G("totalItems",n.filteredOrders.length)("pageSize",n.pageSize),e.R50("currentPage",n.page),e.R7$(),e.Y8G("ngIf",n.modalOpen),e.R7$(),e.Y8G("ngIf",n.modalOpen))},dependencies:[c.MD,c.Sq,c.bT,c.vh,d.YN,d.xH,d.y7,d.me,d.wz,d.BC,d.vS,u.Wk,g.e],styles:[".orders-container[_ngcontent-%COMP%]{padding:25px}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:20px}.page-header[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:280px;padding:8px 12px;border-radius:8px;border:1px solid #ddd}.orders-table-wrapper[_ngcontent-%COMP%]{background:#fff;padding:20px;border-radius:14px;box-shadow:0 4px 20px #0000000d}.orders-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.orders-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-align:left;padding:12px;color:#555;font-weight:600;border-bottom:1px solid #eee}.orders-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px;border-bottom:1px solid #f5f5f5}.status[_ngcontent-%COMP%]{padding:5px 12px;border-radius:18px;font-size:12px;color:#fff;font-weight:600}.status.pending[_ngcontent-%COMP%]{background:#f0ad4e}.status.paid[_ngcontent-%COMP%]{background:#28a745}.status.cancelled[_ngcontent-%COMP%]{background:#dc3545}.btn-view[_ngcontent-%COMP%]{background:#007bff;color:#fff;padding:6px 12px;border-radius:6px;border:none;cursor:pointer}.btn-edit[_ngcontent-%COMP%]{background:#444;color:#fff;padding:6px 12px;border-radius:6px;border:none;margin-left:8px;cursor:pointer}.btn-edit[_ngcontent-%COMP%]:hover{background:#000}.modal-backdrop[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000073}.modal[_ngcontent-%COMP%]{position:fixed;inset:0;display:flex;justify-content:center;align-items:center}.modal-content[_ngcontent-%COMP%]{background:#fff;padding:22px;width:350px;border-radius:12px;box-shadow:0 10px 30px #0000001a}.modal-actions[_ngcontent-%COMP%]{margin-top:15px;display:flex;gap:10px}.btn-save[_ngcontent-%COMP%]{background:#111;color:#fff;padding:8px;width:100%;border-radius:6px}.btn-cancel[_ngcontent-%COMP%]{background:#bbb;padding:8px;width:100%;border-radius:6px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td.user[_ngcontent-%COMP%]{cursor:pointer;color:#0079fb;transition:.5s ease all}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td.user[_ngcontent-%COMP%]:hover{text-decoration:underline}"]})}return r})()}}]);