"use strict";(self.webpackChunkshop_web=self.webpackChunkshop_web||[]).push([[6],{9006:(F,l,r)=>{r.r(l),r.d(l,{ProductsComponent:()=>k});var s=r(2881),p=r(9870),u=r(262),t=r(1360),g=r(6241);const _=n=>({display:n}),h=n=>["/admin/products/edit",n];function m(n,c){1&n&&(t.j41(0,"div"),t.EFF(1,"Loading products..."),t.k0s())}function b(n,c){if(1&n&&(t.j41(0,"div"),t.EFF(1),t.k0s()),2&n){const e=t.XpG();t.R7$(),t.JRh(e.error)}}function P(n,c){if(1&n){const e=t.RV6();t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.nrm(3,"img",18),t.j41(4,"td"),t.EFF(5),t.k0s(),t.j41(6,"td"),t.EFF(7),t.k0s(),t.j41(8,"td"),t.EFF(9),t.k0s(),t.j41(10,"td")(11,"span",19),t.EFF(12),t.k0s()(),t.j41(13,"td")(14,"button",20),t.EFF(15,"Edit"),t.k0s(),t.j41(16,"button",21),t.bIt("click",function(){const o=t.eBV(e).$implicit,i=t.XpG(2);return t.Njj(i.openDeleteModal(o))}),t.EFF(17,"Delete"),t.k0s()()()}if(2&n){const e=c.$implicit,d=c.index,o=t.XpG(2);t.R7$(2),t.JRh((o.page-1)*o.pageSize+d+1),t.R7$(),t.Y8G("src",e.imageUrl,t.B4B),t.R7$(2),t.JRh(e.name),t.R7$(2),t.SpI("$",e.price,""),t.R7$(2),t.JRh(e.itemsLeft),t.R7$(2),t.AVh("active",e.itemsLeft>0)("inactive",0===e.itemsLeft),t.R7$(),t.SpI(" ",e.itemsLeft>0?"In Stock":"Out of Stock"," "),t.R7$(2),t.Y8G("routerLink",t.eq3(11,h,e.id))}}function f(n,c){if(1&n&&(t.j41(0,"div")(1,"div",13)(2,"button",14),t.EFF(3,"+ Add Product"),t.k0s(),t.nrm(4,"input",15),t.k0s(),t.j41(5,"table",16)(6,"thead")(7,"tr")(8,"th"),t.EFF(9,"#"),t.k0s(),t.j41(10,"th"),t.EFF(11,"Image"),t.k0s(),t.j41(12,"th"),t.EFF(13,"Name"),t.k0s(),t.j41(14,"th"),t.EFF(15,"Price"),t.k0s(),t.j41(16,"th"),t.EFF(17,"Stock"),t.k0s(),t.j41(18,"th"),t.EFF(19,"Status"),t.k0s(),t.j41(20,"th"),t.EFF(21,"Actions"),t.k0s()()(),t.j41(22,"tbody"),t.DNE(23,P,18,13,"tr",17),t.k0s()()()),2&n){const e=t.XpG();t.R7$(23),t.Y8G("ngForOf",e.paginatedProducts)}}let k=(()=>{class n{productService;products=[];loading=!0;error="";showDeleteModal=!1;selectedProduct=null;page=1;pageSize=5;constructor(e){this.productService=e}ngOnInit(){this.loadProducts()}loadProducts(){this.productService.getAllProducts().subscribe({next:e=>{this.products=e,this.loading=!1},error:()=>{this.error="Error loading products!",this.loading=!1}})}openDeleteModal(e){this.selectedProduct=e,this.showDeleteModal=!0}closeDeleteModal(){this.showDeleteModal=!1,this.selectedProduct=null}confirmDelete(){this.selectedProduct&&this.productService.deleteProduct(this.selectedProduct.id).subscribe({next:()=>{this.products=this.products.filter(e=>e.id!==this.selectedProduct.id),this.closeDeleteModal()},error:()=>{alert("Error deleting product!")}})}get paginatedProducts(){const e=(this.page-1)*this.pageSize;return this.products.slice(e,e+this.pageSize)}static \u0275fac=function(d){return new(d||n)(t.rXU(g.b))};static \u0275cmp=t.VBU({type:n,selectors:[["app-products"]],decls:24,vars:12,consts:[[1,"page-title"],[4,"ngIf"],["tabindex","-1",1,"modal",3,"ngStyle"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header","bg-danger","text-white"],[1,"modal-title"],["type","button",1,"btn-close",3,"click"],[1,"modal-body"],[1,"modal-footer"],[1,"btn","btn-secondary",3,"click"],[1,"btn","btn-danger",3,"click"],[3,"currentPageChange","totalItems","pageSize","currentPage"],[1,"actions"],["routerLink","/admin/products/add",1,"btn-add"],["type","text","placeholder","Search...",1,"search-input"],[1,"product-table"],[4,"ngFor","ngForOf"],["alt","",1,"img-sm",3,"src"],[1,"status"],[1,"btn-edit",3,"routerLink"],[1,"btn-delete",3,"click"]],template:function(d,o){1&d&&(t.j41(0,"h2",0),t.EFF(1,"Products"),t.k0s(),t.DNE(2,m,2,0,"div",1)(3,b,2,1,"div",1)(4,f,24,1,"div",1),t.j41(5,"div",2)(6,"div",3)(7,"div",4)(8,"div",5)(9,"h5",6),t.EFF(10,"Delete Product"),t.k0s(),t.j41(11,"button",7),t.bIt("click",function(){return o.closeDeleteModal()}),t.k0s()(),t.j41(12,"div",8)(13,"p"),t.EFF(14,"Are you sure you want to delete "),t.j41(15,"strong"),t.EFF(16),t.k0s(),t.EFF(17,"?"),t.k0s()(),t.j41(18,"div",9)(19,"button",10),t.bIt("click",function(){return o.closeDeleteModal()}),t.EFF(20,"Cancel"),t.k0s(),t.j41(21,"button",11),t.bIt("click",function(){return o.confirmDelete()}),t.EFF(22,"Delete"),t.k0s()()()()(),t.j41(23,"app-pagination",12),t.mxI("currentPageChange",function(a){return t.DH7(o.page,a)||(o.page=a),a}),t.k0s()),2&d&&(t.R7$(2),t.Y8G("ngIf",o.loading),t.R7$(),t.Y8G("ngIf",o.error),t.R7$(),t.Y8G("ngIf",!o.loading),t.R7$(),t.AVh("show",o.showDeleteModal),t.Y8G("ngStyle",t.eq3(10,_,o.showDeleteModal?"block":"none")),t.R7$(11),t.JRh(null==o.selectedProduct?null:o.selectedProduct.name),t.R7$(7),t.Y8G("totalItems",o.products.length)("pageSize",o.pageSize),t.R50("currentPage",o.page))},dependencies:[s.MD,s.Sq,s.bT,s.B3,p.Wk,u.e],styles:[".page-title[_ngcontent-%COMP%]{font-size:26px;font-weight:700;margin-bottom:20px}.actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:20px}.btn-add[_ngcontent-%COMP%]{padding:8px 15px;background:#0d6efd;border:none;color:#fff;border-radius:6px;cursor:pointer}.search-input[_ngcontent-%COMP%]{padding:8px 12px;width:250px;border-radius:6px;border:1px solid #ccc}.product-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.product-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-align:left;padding:12px;background:#f3f4f6}.product-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px;border-bottom:1px solid #eee}.img-sm[_ngcontent-%COMP%]{width:50px;height:50px;object-fit:cover}.status[_ngcontent-%COMP%]{padding:4px 10px;border-radius:12px;color:#fff}.status.active[_ngcontent-%COMP%]{background:#16a34a}.status.inactive[_ngcontent-%COMP%]{background:#dc2626}.btn-edit[_ngcontent-%COMP%]{padding:5px 10px;background:#10b981;border:none;color:#fff;margin-right:8px;border-radius:6px;cursor:pointer}.btn-delete[_ngcontent-%COMP%]{padding:5px 10px;background:#dc2626;border:none;color:#fff;border-radius:6px;cursor:pointer}.modal.show[_ngcontent-%COMP%]{background:#00000080}.modal-dialog[_ngcontent-%COMP%]{margin-top:120px}.modal-content[_ngcontent-%COMP%]{border-radius:10px}"]})}return n})()}}]);