import{a as z}from"./chunk-BJVT3YSA.js";import{a as T}from"./chunk-RNT3NOGQ.js";import{e as L}from"./chunk-RYH6ERY7.js";import"./chunk-7VWXCVTQ.js";import{h as O,i as w,j as I,l as D}from"./chunk-NPH7NEJF.js";import{$a as m,Ba as S,Fa as C,Ka as g,Qa as l,Sa as f,Ta as t,Ua as e,Va as _,Y as P,Ya as y,Z as h,ab as u,jb as n,kb as s,lb as x,ob as M,pb as E,qb as k,sa as v,tb as b,wa as a}from"./chunk-3ZPPO4HR.js";import"./chunk-2VMXMS7J.js";var N=r=>({display:r}),A=r=>["/admin/products/edit",r];function j(r,d){r&1&&(t(0,"div"),n(1,"Loading products..."),e())}function V(r,d){if(r&1&&(t(0,"div"),n(1),e()),r&2){let i=u();a(),s(i.error)}}function W(r,d){if(r&1){let i=y();t(0,"tr")(1,"td"),n(2),e(),_(3,"img",18),t(4,"td"),n(5),e(),t(6,"td"),n(7),e(),t(8,"td"),n(9),e(),t(10,"td")(11,"span",19),n(12),e()(),t(13,"td")(14,"button",20),n(15,"Edit"),e(),t(16,"button",21),m("click",function(){let c=P(i).$implicit,p=u(2);return h(p.openDeleteModal(c))}),n(17,"Delete"),e()()()}if(r&2){let i=d.$implicit,o=d.index,c=u(2);a(2),s((c.page-1)*c.pageSize+o+1),a(),l("src",i.imageUrl,v),a(2),s(i.name),a(2),x("$",i.price,""),a(2),s(i.itemsLeft),a(2),f("active",i.itemsLeft>0)("inactive",i.itemsLeft===0),a(),x(" ",i.itemsLeft>0?"In Stock":"Out of Stock"," "),a(2),l("routerLink",b(11,A,i.id))}}function U(r,d){if(r&1&&(t(0,"div")(1,"div",13)(2,"button",14),n(3,"+ Add Product"),e(),_(4,"input",15),e(),t(5,"table",16)(6,"thead")(7,"tr")(8,"th"),n(9,"#"),e(),t(10,"th"),n(11,"Image"),e(),t(12,"th"),n(13,"Name"),e(),t(14,"th"),n(15,"Price"),e(),t(16,"th"),n(17,"Stock"),e(),t(18,"th"),n(19,"Status"),e(),t(20,"th"),n(21,"Actions"),e()()(),t(22,"tbody"),g(23,W,18,13,"tr",17),e()()()),r&2){let i=u();a(23),l("ngForOf",i.paginatedProducts)}}var F=class r{constructor(d){this.productService=d}products=[];loading=!0;error="";showDeleteModal=!1;selectedProduct=null;page=1;pageSize=5;ngOnInit(){this.loadProducts()}loadProducts(){this.productService.getAllProducts().subscribe({next:d=>{this.products=d,this.loading=!1},error:()=>{this.error="Error loading products!",this.loading=!1}})}openDeleteModal(d){this.selectedProduct=d,this.showDeleteModal=!0}closeDeleteModal(){this.showDeleteModal=!1,this.selectedProduct=null}confirmDelete(){this.selectedProduct&&this.productService.deleteProduct(this.selectedProduct.id).subscribe({next:()=>{this.products=this.products.filter(d=>d.id!==this.selectedProduct.id),this.closeDeleteModal()},error:()=>{alert("Error deleting product!")}})}get paginatedProducts(){let d=(this.page-1)*this.pageSize;return this.products.slice(d,d+this.pageSize)}static \u0275fac=function(i){return new(i||r)(S(T))};static \u0275cmp=C({type:r,selectors:[["app-products"]],decls:24,vars:12,consts:[[1,"page-title"],[4,"ngIf"],["tabindex","-1",1,"modal",3,"ngStyle"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header","bg-danger","text-white"],[1,"modal-title"],["type","button",1,"btn-close",3,"click"],[1,"modal-body"],[1,"modal-footer"],[1,"btn","btn-secondary",3,"click"],[1,"btn","btn-danger",3,"click"],[3,"currentPageChange","totalItems","pageSize","currentPage"],[1,"actions"],["routerLink","/admin/products/add",1,"btn-add"],["type","text","placeholder","Search...",1,"search-input"],[1,"product-table"],[4,"ngFor","ngForOf"],["alt","",1,"img-sm",3,"src"],[1,"status"],[1,"btn-edit",3,"routerLink"],[1,"btn-delete",3,"click"]],template:function(i,o){i&1&&(t(0,"h2",0),n(1,"Products"),e(),g(2,j,2,0,"div",1)(3,V,2,1,"div",1)(4,U,24,1,"div",1),t(5,"div",2)(6,"div",3)(7,"div",4)(8,"div",5)(9,"h5",6),n(10,"Delete Product"),e(),t(11,"button",7),m("click",function(){return o.closeDeleteModal()}),e()(),t(12,"div",8)(13,"p"),n(14,"Are you sure you want to delete "),t(15,"strong"),n(16),e(),n(17,"?"),e()(),t(18,"div",9)(19,"button",10),m("click",function(){return o.closeDeleteModal()}),n(20,"Cancel"),e(),t(21,"button",11),m("click",function(){return o.confirmDelete()}),n(22,"Delete"),e()()()()(),t(23,"app-pagination",12),k("currentPageChange",function(p){return E(o.page,p)||(o.page=p),p}),e()),i&2&&(a(2),l("ngIf",o.loading),a(),l("ngIf",o.error),a(),l("ngIf",!o.loading),a(),f("show",o.showDeleteModal),l("ngStyle",b(10,N,o.showDeleteModal?"block":"none")),a(11),s(o.selectedProduct==null?null:o.selectedProduct.name),a(7),l("totalItems",o.products.length)("pageSize",o.pageSize),M("currentPage",o.page))},dependencies:[D,O,w,I,L,z],styles:[".page-title[_ngcontent-%COMP%]{font-size:26px;font-weight:700;margin-bottom:20px}.actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:20px}.btn-add[_ngcontent-%COMP%]{padding:8px 15px;background:#0d6efd;border:none;color:#fff;border-radius:6px;cursor:pointer}.search-input[_ngcontent-%COMP%]{padding:8px 12px;width:250px;border-radius:6px;border:1px solid #ccc}.product-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.product-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-align:left;padding:12px;background:#f3f4f6}.product-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px;border-bottom:1px solid #eee}.img-sm[_ngcontent-%COMP%]{width:50px;height:50px;object-fit:cover}.status[_ngcontent-%COMP%]{padding:4px 10px;border-radius:12px;color:#fff}.status.active[_ngcontent-%COMP%]{background:#16a34a}.status.inactive[_ngcontent-%COMP%]{background:#dc2626}.btn-edit[_ngcontent-%COMP%]{padding:5px 10px;background:#10b981;border:none;color:#fff;margin-right:8px;border-radius:6px;cursor:pointer}.btn-delete[_ngcontent-%COMP%]{padding:5px 10px;background:#dc2626;border:none;color:#fff;border-radius:6px;cursor:pointer}.modal.show[_ngcontent-%COMP%]{background:#00000080}.modal-dialog[_ngcontent-%COMP%]{margin-top:120px}.modal-content[_ngcontent-%COMP%]{border-radius:10px}"]})};export{F as ProductsComponent};
