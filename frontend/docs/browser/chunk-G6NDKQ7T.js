import{a as n}from"./chunk-7VWXCVTQ.js";import{r as u}from"./chunk-NPH7NEJF.js";import{M as o,R as s,g as a}from"./chunk-3ZPPO4HR.js";var p=class r{constructor(t){this.http=t}apiUrl=`${n.apiBaseUrl}/cart`;getCart(t){return this.http.get(`${this.apiUrl}/${t}`)}addToCart(t,e){this.http.post(`${n.apiBaseUrl}/Cart/add`,t).subscribe({next:i=>{this.cartCount.next(i.cartItemsCount),e?.(!0)},error:()=>e?.(!1)})}refreshCartCount(t){this.getCart(t).subscribe(e=>{let i=e.items.reduce((m,c)=>m+c.quantity,0);this.cartCount.next(i)})}updateQty(t,e){return this.http.put(`${this.apiUrl}/update-qty/${t}/${e}`,{withCredentials:!0},{})}removeItem(t){return this.http.delete(`${this.apiUrl}/item/${t}`,{withCredentials:!0})}clearCart(t){return this.http.delete(`${this.apiUrl}/clear/${t}`,{withCredentials:!0})}cartCount=new a(0);setCartCount(t){this.cartCount.next(t)}static \u0275fac=function(e){return new(e||r)(s(u))};static \u0275prov=o({token:r,factory:r.\u0275fac,providedIn:"root"})};export{p as a};
