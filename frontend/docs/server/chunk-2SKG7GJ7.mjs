import './polyfills.server.mjs';
import{a as U}from"./chunk-VPDV2SX5.mjs";import{a as R}from"./chunk-JA5OA5QV.mjs";import{a as q}from"./chunk-YX6I325E.mjs";import{a as D}from"./chunk-WDHLO3IG.mjs";import{e as L,i as j}from"./chunk-EY6CEKKC.mjs";import"./chunk-YUFWBB53.mjs";import{b as N,c as B,f as z,n as F}from"./chunk-25CODJY3.mjs";import{j as E,k as V,m as I,n as W}from"./chunk-GDXHRO5M.mjs";import{$a as u,Aa as o,Bb as A,Cb as O,Db as T,Fa as P,Ja as y,Oa as b,Wa as g,Ya as h,Z as p,Za as n,_ as m,_a as i,cb as w,fb as x,gb as c,pb as s,qb as M,rb as C,tb as S,ub as _,vb as f,wb as v,zb as k}from"./chunk-LEXWQGSC.mjs";import"./chunk-S6KH3LOX.mjs";var Y=a=>["/Order",a];function H(a,r){if(a&1&&(n(0,"div",15),s(1),i()),a&2){let e=c(2);o(),C(" ",e.profileMessage," ")}}function J(a,r){if(a&1){let e=w();n(0,"div",10)(1,"h4"),s(2,"Persoonlijke gegevens"),i(),n(3,"label"),s(4,"Volledige naam"),i(),n(5,"input",11),v("ngModelChange",function(t){p(e);let d=c();return f(d.user.fullName,t)||(d.user.fullName=t),m(t)}),i(),n(6,"label"),s(7,"Email"),i(),u(8,"input",12),n(9,"label"),s(10,"Telefoonnummer"),i(),n(11,"input",11),v("ngModelChange",function(t){p(e);let d=c();return f(d.user.phone,t)||(d.user.phone=t),m(t)}),i(),n(12,"button",13),x("click",function(){p(e);let t=c();return m(t.saveProfile())}),s(13," Opslaan "),i(),b(14,H,2,1,"div",14),i()}if(a&2){let e=c();o(5),_("ngModel",e.user.fullName),o(3),g("value",e.user.email),o(3),_("ngModel",e.user.phone),o(3),g("ngIf",e.profileMessage)}}function K(a,r){if(a&1){let e=w();n(0,"div",22)(1,"div")(2,"strong"),s(3),i(),u(4,"br"),s(5),i(),n(6,"div")(7,"button",23),x("click",function(){let t=p(e).$implicit,d=c(2);return m(d.deleteAddress(t.id))}),s(8," Verwijderen "),i()()()}if(a&2){let e=r.$implicit;o(3),M(e.addressLine),o(2),S(" ",e.city," \u2013 ",e.province," \u2013 ",e.postalCode," ")}}function Q(a,r){if(a&1){let e=w();n(0,"div",10)(1,"h4"),s(2,"Mijn adressen"),i(),b(3,K,9,4,"div",16),u(4,"hr"),n(5,"h5"),s(6,"Nieuw adres toevoegen"),i(),n(7,"input",17),v("ngModelChange",function(t){p(e);let d=c();return f(d.newAddress.addressLine,t)||(d.newAddress.addressLine=t),m(t)}),i(),n(8,"input",18),v("ngModelChange",function(t){p(e);let d=c();return f(d.newAddress.city,t)||(d.newAddress.city=t),m(t)}),i(),n(9,"input",19),v("ngModelChange",function(t){p(e);let d=c();return f(d.newAddress.province,t)||(d.newAddress.province=t),m(t)}),i(),n(10,"input",20),v("ngModelChange",function(t){p(e);let d=c();return f(d.newAddress.postalCode,t)||(d.newAddress.postalCode=t),m(t)}),i(),n(11,"button",21),x("click",function(){p(e);let t=c();return m(t.addAddress())}),s(12," Toevoegen "),i()()}if(a&2){let e=c();o(3),g("ngForOf",e.addresses),o(4),_("ngModel",e.newAddress.addressLine),o(),_("ngModel",e.newAddress.city),o(),_("ngModel",e.newAddress.province),o(),_("ngModel",e.newAddress.postalCode)}}function X(a,r){if(a&1&&(n(0,"div",26)(1,"div")(2,"strong"),s(3),i(),u(4,"br"),s(5),A(6,"date"),u(7,"br"),n(8,"span",27),s(9),i()(),n(10,"div",28),s(11),i()()),a&2){let e=r.$implicit;g("routerLink",k(14,Y,e.id)),o(3),C("Bestelling #",e.orderNumber,""),o(2),C(" ",O(6,11,e.createdAt,"medium"),""),o(3),h("pending",e.status==="Pending")("paid",e.status==="Paid")("cancelled",e.status==="Cancelled"),o(),C(" ",e.status," "),o(2),C(" \u20AC",e.totalPrice," ")}}function Z(a,r){a&1&&(n(0,"p",29),s(1,"Geen bestellingen gevonden."),i())}function $(a,r){if(a&1){let e=w();n(0,"div",10)(1,"h4"),s(2,"Mijn bestellingen"),i(),b(3,X,12,16,"div",24),n(4,"app-pagination",25),v("currentPageChange",function(t){p(e);let d=c();return f(d.orderPage,t)||(d.orderPage=t),m(t)}),i(),b(5,Z,2,0,"ng-template",null,0,T),i()}if(a&2){let e=c();o(3),g("ngForOf",e.pagedOrders),o(),g("totalItems",e.orders.length)("pageSize",e.orderPageSize),_("currentPage",e.orderPage)}}var G=class a{constructor(r,e,l,t){this.route=r;this.userService=e;this.addressService=l;this.orderService=t}user={};profileMessage="";addresses=[];orders=[];activeTab="profile";newAddress={userId:0,addressLine:"",city:"",province:"",postalCode:"",isDefault:!1};orderPage=1;orderPageSize=5;ngOnInit(){this.route.queryParams.subscribe(r=>{let e=r.tab;e&&(this.activeTab=e)}),this.userService.currentUser$.subscribe(r=>{this.user=r,r&&(this.loadAddresses(),this.loadOrders())})}saveProfile(){this.userService.updateProfile(this.user.id,{fullName:this.user.fullName,phone:this.user.phone}).subscribe(()=>{this.profileMessage="Profiel succesvol bijgewerkt!"})}loadAddresses(){this.addressService.getByUserId(this.user.id).subscribe(r=>{this.addresses=r})}addAddress(){let r={addressLine:this.newAddress.addressLine,city:this.newAddress.city,province:this.newAddress.province,postalCode:this.newAddress.postalCode,isDefault:!1};this.addressService.addAddress(this.user.id,r).subscribe(()=>{this.loadAddresses()})}deleteAddress(r){this.addressService.deleteAddress(r).subscribe(()=>{this.loadAddresses()})}loadOrders(){this.orderService.getOrdersByCustomer(this.user.id).subscribe(r=>{this.orders=r})}get pagedOrders(){let r=(this.orderPage-1)*this.orderPageSize;return this.orders.slice(r,r+this.orderPageSize)}static \u0275fac=function(e){return new(e||a)(P(L),P(D),P(U),P(q))};static \u0275cmp=y({type:a,selectors:[["app-profile"]],decls:19,vars:9,consts:[["noOrder",""],[1,"account-container"],[1,"page-title"],[1,"nav","nav-tabs","account-tabs"],[1,"nav-item"],[1,"nav-link",3,"click"],[1,"bi","bi-person-circle","me-2"],[1,"bi","bi-geo-alt","me-2"],[1,"bi","bi-bag-check","me-2"],["class","tab-body card",4,"ngIf"],[1,"tab-body","card"],[1,"form-control",3,"ngModelChange","ngModel"],["disabled","",1,"form-control",3,"value"],[1,"btn","btn-dark","mt-3","w-100",3,"click"],["class","alert alert-success mt-2",4,"ngIf"],[1,"alert","alert-success","mt-2"],["class","address-item",4,"ngFor","ngForOf"],["placeholder","Adres",1,"form-control",3,"ngModelChange","ngModel"],["placeholder","Stad",1,"form-control",3,"ngModelChange","ngModel"],["placeholder","Provincie",1,"form-control",3,"ngModelChange","ngModel"],["placeholder","Postcode",1,"form-control",3,"ngModelChange","ngModel"],[1,"btn","btn-dark","mt-2","w-100",3,"click"],[1,"address-item"],[1,"btn","btn-sm","btn-danger",3,"click"],["class","order-item clickable",3,"routerLink",4,"ngFor","ngForOf"],[3,"currentPageChange","totalItems","pageSize","currentPage"],[1,"order-item","clickable",3,"routerLink"],[1,"status"],[1,"price"],[1,"empty"]],template:function(e,l){e&1&&(n(0,"div",1)(1,"h2",2),s(2,"Mijn account"),i(),n(3,"ul",3)(4,"li",4)(5,"a",5),x("click",function(){return l.activeTab="profile"}),u(6,"i",6),s(7," Persoonlijke gegevens "),i()(),n(8,"li",4)(9,"a",5),x("click",function(){return l.activeTab="address"}),u(10,"i",7),s(11," Mijn adressen "),i()(),n(12,"li",4)(13,"a",5),x("click",function(){return l.activeTab="orders"}),u(14,"i",8),s(15," Mijn bestellingen "),i()()(),b(16,J,15,4,"div",9)(17,Q,13,5,"div",9)(18,$,7,4,"div",9),i()),e&2&&(o(5),h("active",l.activeTab==="profile"),o(4),h("active",l.activeTab==="address"),o(4),h("active",l.activeTab==="orders"),o(3),g("ngIf",l.activeTab==="profile"),o(),g("ngIf",l.activeTab==="address"),o(),g("ngIf",l.activeTab==="orders"))},dependencies:[W,E,V,I,F,N,B,z,R,j],styles:[".account-container[_ngcontent-%COMP%]{max-width:900px;margin:40px auto}.page-title[_ngcontent-%COMP%]{font-size:28px;font-weight:700;margin-bottom:20px}.account-tabs[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{cursor:pointer;font-size:15px;padding:12px 20px;font-weight:600;color:#555}.account-tabs[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]{color:#000;border-bottom:3px solid #000}.tab-body[_ngcontent-%COMP%]{margin-top:20px;padding:25px;border-radius:12px;background:#fff;box-shadow:0 4px 12px #00000014}label[_ngcontent-%COMP%]{font-weight:600;margin-top:10px}.form-control[_ngcontent-%COMP%]{padding:12px;border-radius:8px;background:#eef3ff;margin-bottom:8px}.address-item[_ngcontent-%COMP%], .order-item[_ngcontent-%COMP%]{border-bottom:1px solid #eee;border-radius:5px;padding:12px;display:flex;justify-content:space-between}.price[_ngcontent-%COMP%]{font-weight:700;font-size:18px}.order-item.clickable[_ngcontent-%COMP%]{cursor:pointer;transition:.2s}.order-item.clickable[_ngcontent-%COMP%]:hover{background:#f1f1f1;transform:translateY(-2px)}.status[_ngcontent-%COMP%]{padding:5px 12px;border-radius:18px;font-size:12px;color:#fff;font-weight:600}.status.pending[_ngcontent-%COMP%]{background:#f0ad4e}.status.paid[_ngcontent-%COMP%]{background:#28a745}.status.cancelled[_ngcontent-%COMP%]{background:#dc3545}"]})};export{G as ProfileComponent};
