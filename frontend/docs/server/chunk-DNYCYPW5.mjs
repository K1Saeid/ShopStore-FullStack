import './polyfills.server.mjs';
import{a as K,b as Y}from"./chunk-IPCCYLMA.mjs";import{a as G}from"./chunk-WFKNRLHN.mjs";import{a as X}from"./chunk-VTSJFYUR.mjs";import{e as N,h as T}from"./chunk-EY6CEKKC.mjs";import"./chunk-YUFWBB53.mjs";import{b as O,c as L,d as F,e as U,f as k,g as B,h as z,j as q,k as R,l as j,m as A,n as D}from"./chunk-25CODJY3.mjs";import{j as I,k as W,n as V}from"./chunk-GDXHRO5M.mjs";import{$a as h,Aa as d,Fa as f,Ja as S,Oa as C,Wa as m,Z as p,Za as i,_ as u,_a as n,cb as w,fb as M,gb as c,pb as a,qb as y,rb as E,ub as g,vb as _,wa as v,wb as x,yb as P,zb as b}from"./chunk-LEXWQGSC.mjs";import"./chunk-S6KH3LOX.mjs";var J=()=>["advlist autolink lists link image charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime media table paste code help wordcount"],Q=o=>({height:350,menubar:!0,plugins:o,toolbar:"undo redo | blocks | bold italic underline forecolor | alignleft aligncenter alignright alignjustify | bullist numlist | link image | table | removeformat"});function Z(o,l){o&1&&(i(0,"div"),a(1,"Loading..."),n())}function $(o,l){if(o&1&&(i(0,"div",27),a(1),n()),o&2){let e=c(2);d(),y(e.successMessage)}}function ee(o,l){if(o&1&&(i(0,"div",28),a(1),n()),o&2){let e=c(2);d(),y(e.errorMessage)}}function te(o,l){if(o&1&&(i(0,"option",19),a(1),n()),o&2){let e=l.$implicit;m("value",e.name),d(),E(" ",e.name," ")}}function ie(o,l){if(o&1&&h(0,"img",29),o&2){let e=c(2);m("src",e.previewImage,v)}}function ne(o,l){if(o&1&&h(0,"img",29),o&2){let e=c(2);m("src",e.product.imageUrl,v)}}function re(o,l){if(o&1){let e=w();i(0,"div"),C(1,$,2,1,"div",2)(2,ee,2,1,"div",3),i(3,"form",4),M("ngSubmit",function(){p(e);let t=c();return u(t.updateProduct())}),i(4,"div",5)(5,"div",6)(6,"label"),a(7,"Name"),n(),i(8,"input",7),x("ngModelChange",function(t){p(e);let r=c();return _(r.product.name,t)||(r.product.name=t),u(t)}),n()(),i(9,"div",6)(10,"label"),a(11,"Brand"),n(),i(12,"input",8),x("ngModelChange",function(t){p(e);let r=c();return _(r.product.brand,t)||(r.product.brand=t),u(t)}),n()(),i(13,"div",6)(14,"label"),a(15,"Category"),n(),i(16,"select",9),x("ngModelChange",function(t){p(e);let r=c();return _(r.product.categoryId,t)||(r.product.categoryId=t),u(t)}),C(17,te,2,2,"option",10),n()(),i(18,"div",6)(19,"label"),a(20,"Gender"),n(),i(21,"select",11),x("ngModelChange",function(t){p(e);let r=c();return _(r.product.gender,t)||(r.product.gender=t),u(t)}),i(22,"option",12),a(23,"UNISEX"),n(),i(24,"option",13),a(25,"MEN"),n(),i(26,"option",14),a(27,"WOMEN"),n()()(),i(28,"div",6)(29,"label"),a(30,"Price"),n(),i(31,"input",15),x("ngModelChange",function(t){p(e);let r=c();return _(r.product.price,t)||(r.product.price=t),u(t)}),n()(),i(32,"div",6)(33,"label"),a(34,"Discount Price"),n(),i(35,"input",16),x("ngModelChange",function(t){p(e);let r=c();return _(r.product.discountPrice,t)||(r.product.discountPrice=t),u(t)}),n()(),i(36,"div",6)(37,"label"),a(38,"Items Left"),n(),i(39,"input",17),x("ngModelChange",function(t){p(e);let r=c();return _(r.product.itemsLeft,t)||(r.product.itemsLeft=t),u(t)}),n()(),i(40,"div",6)(41,"label"),a(42,"In Stock"),n(),i(43,"select",18),x("ngModelChange",function(t){p(e);let r=c();return _(r.product.inStock,t)||(r.product.inStock=t),u(t)}),i(44,"option",19),a(45,"Yes"),n(),i(46,"option",19),a(47,"No"),n()()(),i(48,"div",20)(49,"label"),a(50,"Sizes"),n(),i(51,"input",21),x("ngModelChange",function(t){p(e);let r=c();return _(r.product.sizes,t)||(r.product.sizes=t),u(t)}),n()(),i(52,"div",20)(53,"label"),a(54,"Colors"),n(),i(55,"input",22),x("ngModelChange",function(t){p(e);let r=c();return _(r.product.colors,t)||(r.product.colors=t),u(t)}),n()(),i(56,"div",20)(57,"label"),a(58,"Description"),n(),i(59,"editor",23),x("ngModelChange",function(t){p(e);let r=c();return _(r.product.description,t)||(r.product.description=t),u(t)}),n()(),i(60,"div",20)(61,"label"),a(62,"Product Image"),n(),i(63,"input",24),M("change",function(t){p(e);let r=c();return u(r.onFileSelected(t))}),n(),C(64,ie,1,1,"img",25)(65,ne,1,1,"img",25),n()(),i(66,"button",26),a(67,"Save Changes"),n()()()}if(o&2){let e=c();d(),m("ngIf",e.successMessage),d(),m("ngIf",e.errorMessage),d(6),g("ngModel",e.product.name),d(4),g("ngModel",e.product.brand),d(4),g("ngModel",e.product.categoryId),d(),m("ngForOf",e.categories),d(4),g("ngModel",e.product.gender),d(10),g("ngModel",e.product.price),d(4),g("ngModel",e.product.discountPrice),d(4),g("ngModel",e.product.itemsLeft),d(4),g("ngModel",e.product.inStock),d(),m("value",!0),d(2),m("value",!1),d(5),g("ngModel",e.product.sizes),d(4),g("ngModel",e.product.colors),d(4),g("ngModel",e.product.description),m("init",b(20,Q,P(19,J))),d(5),m("ngIf",e.previewImage),d(),m("ngIf",!e.previewImage&&e.product.imageUrl)}}var H=class o{constructor(l,e,s,t){this.route=l;this.productService=e;this.categoryService=s;this.router=t}selectedFile=null;previewImage=null;categories=[];id;product={name:"",description:"",brand:"",gender:"UNISEX",sizes:"",colors:"",price:0,discountPrice:0,itemsLeft:0,inStock:!0,imageUrl:"",slug:"",categoryId:null,categoryName:""};loading=!0;successMessage="";errorMessage="";ngOnInit(){this.id=Number(this.route.snapshot.paramMap.get("id")),this.loadCategories(),this.loadProduct()}loadProduct(){this.productService.getProductById(this.id).subscribe({next:l=>{this.product=l,this.loading=!1},error:()=>{this.errorMessage="Product not found!",this.loading=!1}})}updateProduct(){this.successMessage="",this.errorMessage="",this.product.slug=this.product.name.toLowerCase().replace(/ /g,"-"),this.selectedFile?this.productService.uploadImage(this.selectedFile).subscribe({next:l=>{this.product.imageUrl=l.imageUrl,this.saveUpdate()},error:()=>{this.errorMessage="Error uploading image!"}}):this.saveUpdate(),this.productService.updateProduct(this.id,this.product).subscribe({next:()=>{this.successMessage="Product updated successfully!",setTimeout(()=>{this.router.navigate(["/admin/products"])},1500)},error:()=>{this.errorMessage="Error updating product!"}})}onFileSelected(l){this.selectedFile=l.target.files[0];let e=new FileReader;e.onload=()=>{this.previewImage=e.result},e.readAsDataURL(this.selectedFile)}saveUpdate(){this.productService.updateProduct(this.id,this.product).subscribe({next:()=>{this.successMessage="Product updated successfully!",setTimeout(()=>this.router.navigate(["/admin/products"]),1500)},error:()=>{this.errorMessage="Error updating product!"}})}loadCategories(){this.categoryService.getAll().subscribe(l=>{this.categories=l})}static \u0275fac=function(e){return new(e||o)(f(N),f(X),f(G),f(T))};static \u0275cmp=S({type:o,selectors:[["app-edit-product"]],decls:4,vars:2,consts:[[1,"page-title"],[4,"ngIf"],["class","alert alert-success",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],[3,"ngSubmit"],[1,"form-grid"],[1,"form-group"],["type","text","name","name","required","",3,"ngModelChange","ngModel"],["type","text","name","brand","required","",3,"ngModelChange","ngModel"],["name","category",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["name","gender",3,"ngModelChange","ngModel"],["value","UNISEX"],["value","MEN"],["value","WOMEN"],["type","number","name","price","required","",3,"ngModelChange","ngModel"],["type","number","name","discountPrice",3,"ngModelChange","ngModel"],["type","number","name","itemsLeft","required","",3,"ngModelChange","ngModel"],["name","inStock",3,"ngModelChange","ngModel"],[3,"value"],[1,"form-group","full-width"],["type","text","name","sizes",3,"ngModelChange","ngModel"],["type","text","name","colors",3,"ngModelChange","ngModel"],["apiKey","4qqexv2l5k4f1ewaj0bplmi9laf4mw63sqgsj7tpz51re5iq","name","description",3,"ngModelChange","ngModel","init"],["type","file",3,"change"],["class","preview",3,"src",4,"ngIf"],[1,"btn-submit"],[1,"alert","alert-success"],[1,"alert","alert-danger"],[1,"preview",3,"src"]],template:function(e,s){e&1&&(i(0,"h2",0),a(1,"Edit Product"),n(),C(2,Z,2,0,"div",1)(3,re,68,22,"div",1)),e&2&&(d(2),m("ngIf",s.loading),d(),m("ngIf",!s.loading))},dependencies:[V,I,W,D,B,R,j,O,z,q,L,F,A,k,U,Y,K],styles:[".page-title[_ngcontent-%COMP%]{font-size:26px;font-weight:700;margin-bottom:20px}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:20px}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column}.full-width[_ngcontent-%COMP%]{grid-column:span 2}label[_ngcontent-%COMP%]{font-weight:700;margin-bottom:5px}input[_ngcontent-%COMP%], select[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{padding:10px;border-radius:6px;border:1px solid #ccc}textarea[_ngcontent-%COMP%]{min-height:120px}.btn-submit[_ngcontent-%COMP%]{margin-top:20px;padding:12px 20px;background:#0d6efd;border-radius:8px;color:#fff;border:none;cursor:pointer;font-size:16px}.preview[_ngcontent-%COMP%]{width:120px;height:120px;object-fit:cover;margin-top:10px;border-radius:10px;border:1px solid #ddd}"]})};export{H as EditProductComponent};
