"use strict";(self.webpackChunkshop_web=self.webpackChunkshop_web||[]).push([[989],{8989:(x,s,i)=>{i.r(s),i.d(s,{CartComponent:()=>C});var u=i(4341),p=i(2881),d=i(9870),t=i(1360),_=i(6868),l=i(4796);function m(r,a){if(1&r){const n=t.RV6();t.j41(0,"div",7)(1,"div",8),t.nrm(2,"img",9),t.k0s(),t.j41(3,"div",10)(4,"h4",11),t.EFF(5),t.k0s(),t.j41(6,"p",12),t.EFF(7," Color: "),t.j41(8,"span"),t.EFF(9),t.k0s(),t.EFF(10," | Size: "),t.j41(11,"span"),t.EFF(12),t.k0s()(),t.j41(13,"p",13),t.EFF(14),t.k0s(),t.j41(15,"div",14)(16,"button",15),t.bIt("click",function(){const o=t.eBV(n).$implicit,c=t.XpG(2);return t.Njj(c.decrease(o))}),t.EFF(17,"\u2212"),t.k0s(),t.j41(18,"span",16),t.EFF(19),t.k0s(),t.j41(20,"button",15),t.bIt("click",function(){const o=t.eBV(n).$implicit,c=t.XpG(2);return t.Njj(c.increase(o))}),t.EFF(21,"+"),t.k0s()(),t.j41(22,"button",17),t.bIt("click",function(){const o=t.eBV(n).$implicit,c=t.XpG(2);return t.Njj(c.remove(o.id))}),t.nrm(23,"i",18),t.EFF(24," Remove "),t.k0s()()()}if(2&r){const n=a.$implicit;t.R7$(2),t.Y8G("src",n.product.imageUrl,t.B4B),t.R7$(3),t.JRh(n.product.name),t.R7$(4),t.JRh(n.color),t.R7$(3),t.JRh(n.size),t.R7$(2),t.SpI("\u20ac",n.price,""),t.R7$(5),t.JRh(n.quantity)}}function g(r,a){if(1&r&&(t.j41(0,"div",2)(1,"h2",3),t.EFF(2,"Shopping Cart"),t.k0s(),t.DNE(3,m,25,6,"div",4),t.j41(4,"div",5)(5,"span"),t.EFF(6,"Total:"),t.k0s(),t.j41(7,"strong"),t.EFF(8),t.k0s()(),t.j41(9,"button",6),t.EFF(10," Proceed to Checkout "),t.k0s()()),2&r){const n=t.XpG();t.R7$(3),t.Y8G("ngForOf",n.cart.items),t.R7$(5),t.SpI("\u20ac",n.cart.totalPrice,"")}}function h(r,a){1&r&&(t.j41(0,"h3",19),t.EFF(1,"Your cart is empty "),t.k0s(),t.nrm(2,"p"))}let C=(()=>{class r{cartService;userService;cart={items:[]};user;constructor(n,e){this.cartService=n,this.userService=e}ngOnInit(){this.user=this.userService.getCurrentUser(),this.loadCart()}loadCart(){this.cartService.getCart(this.user.id).subscribe(n=>{this.cart=n,this.cartService.setCartCount(n.items.length)})}increase(n){const e=n.quantity+1;this.cartService.updateQty(n.id,e).subscribe(()=>{n.quantity=e,this.updateTotal()})}decrease(n){if(1==n.quantity)return;const e=n.quantity-1;this.cartService.updateQty(n.id,e).subscribe(()=>{n.quantity=e,this.updateTotal()})}remove(n){this.cartService.removeItem(n).subscribe(()=>{this.cart.items=this.cart.items.filter(e=>e.id!==n),this.updateTotal(),this.cartService.setCartCount(this.cart.items.length)})}clearCart(){this.cartService.clearCart(this.user.id).subscribe(()=>{this.cart.items=[],this.updateTotal(),this.cartService.setCartCount(0)})}updateTotal(){this.cart.totalPrice=this.cart.items.reduce((n,e)=>n+e.price*e.quantity,0)}static \u0275fac=function(e){return new(e||r)(t.rXU(_.m),t.rXU(l.D))};static \u0275cmp=t.VBU({type:r,selectors:[["app-cart"]],decls:3,vars:2,consts:[["emptyCart",""],["class","cart-container",4,"ngIf","ngIfElse"],[1,"cart-container"],[1,"cart-title"],["class","cart-item-card",4,"ngFor","ngForOf"],[1,"cart-total-box"],["routerLink","/checkout",1,"checkout-btn","btn-dark"],[1,"cart-item-card"],[1,"cart-img-box"],["alt","",3,"src"],[1,"cart-info"],[1,"product-name"],[1,"product-variant"],[1,"product-price"],[1,"qty-box"],[1,"qty-btn",3,"click"],[1,"qty-number"],[1,"remove-btn",3,"click"],[1,"bi","bi-trash"],[1,"empty-text"]],template:function(e,o){if(1&e&&t.DNE(0,g,11,2,"div",1)(1,h,3,0,"ng-template",null,0,t.C5r),2&e){const c=t.sdS(2);t.Y8G("ngIf",o.cart.items.length>0)("ngIfElse",c)}},dependencies:[u.YN,p.Sq,p.bT,d.Wk],styles:[".cart-container[_ngcontent-%COMP%]{max-width:900px;margin:auto;padding:20px}.cart-title[_ngcontent-%COMP%]{font-size:32px;font-weight:700;margin-bottom:25px}.cart-item-card[_ngcontent-%COMP%]{display:flex;background:#fff;padding:18px;border-radius:14px;box-shadow:0 4px 18px #00000014;margin-bottom:20px;transition:.25s}.cart-item-card[_ngcontent-%COMP%]:hover{transform:translateY(-3px);box-shadow:0 7px 22px #0000001f}.cart-img-box[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:120px;height:auto;border-radius:10px}.cart-info[_ngcontent-%COMP%]{flex:1;margin-left:20px}.product-name[_ngcontent-%COMP%]{font-size:20px;font-weight:600;margin-bottom:5px}.product-variant[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:600;color:#111}.product-price[_ngcontent-%COMP%]{font-size:20px;font-weight:700;margin:5px 0 15px}.qty-box[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;margin-bottom:15px}.qty-btn[_ngcontent-%COMP%]{width:36px;height:36px;border:none;cursor:pointer;border-radius:8px;background:#f0f0f0;font-size:18px;transition:.2s}.qty-btn[_ngcontent-%COMP%]:hover{background:#dcdcdc}.qty-number[_ngcontent-%COMP%]{min-width:28px;text-align:center;font-size:18px;font-weight:600}.remove-btn[_ngcontent-%COMP%]{background:#e63946;color:#fff;border:none;padding:8px 18px;border-radius:8px;cursor:pointer;transition:.25s}.remove-btn[_ngcontent-%COMP%]:hover{background:#c91828}.cart-total-box[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;font-size:22px;margin:25px 0 15px;gap:10px}.checkout-btn[_ngcontent-%COMP%]{width:100%;padding:16px;font-size:20px;font-weight:700;color:#fff;background:#292929;border:none;border-radius:12px;cursor:pointer;transition:.25s}.checkout-btn[_ngcontent-%COMP%]:hover{background:#000}.empty-text[_ngcontent-%COMP%]{text-align:center;margin-top:60px;font-size:24px;opacity:.7}"]})}return r})()}}]);