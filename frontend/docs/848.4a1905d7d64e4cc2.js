"use strict";(self.webpackChunkshop_web=self.webpackChunkshop_web||[]).push([[848],{2848:(E,l,i)=>{i.r(l),i.d(l,{ProfileComponent:()=>k});var a=i(2881),c=i(4341),p=i(262),e=i(1360),_=i(9315),g=i(4796),u=i(6962),m=i(8674);function f(s,d){if(1&s&&(e.j41(0,"div",15),e.EFF(1),e.k0s()),2&s){const n=e.XpG(2);e.R7$(),e.SpI(" ",n.profileMessage," ")}}function v(s,d){if(1&s){const n=e.RV6();e.j41(0,"div",10)(1,"h4"),e.EFF(2,"Persoonlijke gegevens"),e.k0s(),e.j41(3,"label"),e.EFF(4,"Volledige naam"),e.k0s(),e.j41(5,"input",11),e.mxI("ngModelChange",function(t){e.eBV(n);const r=e.XpG();return e.DH7(r.user.fullName,t)||(r.user.fullName=t),e.Njj(t)}),e.k0s(),e.j41(6,"label"),e.EFF(7,"Email"),e.k0s(),e.nrm(8,"input",12),e.j41(9,"label"),e.EFF(10,"Telefoonnummer"),e.k0s(),e.j41(11,"input",11),e.mxI("ngModelChange",function(t){e.eBV(n);const r=e.XpG();return e.DH7(r.user.phone,t)||(r.user.phone=t),e.Njj(t)}),e.k0s(),e.j41(12,"button",13),e.bIt("click",function(){e.eBV(n);const t=e.XpG();return e.Njj(t.saveProfile())}),e.EFF(13," Opslaan "),e.k0s(),e.DNE(14,f,2,1,"div",14),e.k0s()}if(2&s){const n=e.XpG();e.R7$(5),e.R50("ngModel",n.user.fullName),e.R7$(3),e.Y8G("value",n.user.email),e.R7$(3),e.R50("ngModel",n.user.phone),e.R7$(3),e.Y8G("ngIf",n.profileMessage)}}function b(s,d){if(1&s){const n=e.RV6();e.j41(0,"div",22)(1,"div")(2,"strong"),e.EFF(3),e.k0s(),e.nrm(4,"br"),e.EFF(5),e.k0s(),e.j41(6,"div")(7,"button",23),e.bIt("click",function(){const t=e.eBV(n).$implicit,r=e.XpG(2);return e.Njj(r.deleteAddress(t.id))}),e.EFF(8," Verwijderen "),e.k0s()()()}if(2&s){const n=d.$implicit;e.R7$(3),e.JRh(n.addressLine),e.R7$(2),e.E5c(" ",n.city," \u2013 ",n.province," \u2013 ",n.postalCode," ")}}function h(s,d){if(1&s){const n=e.RV6();e.j41(0,"div",10)(1,"h4"),e.EFF(2,"Mijn adressen"),e.k0s(),e.DNE(3,b,9,4,"div",16),e.nrm(4,"hr"),e.j41(5,"h5"),e.EFF(6,"Nieuw adres toevoegen"),e.k0s(),e.j41(7,"input",17),e.mxI("ngModelChange",function(t){e.eBV(n);const r=e.XpG();return e.DH7(r.newAddress.addressLine,t)||(r.newAddress.addressLine=t),e.Njj(t)}),e.k0s(),e.j41(8,"input",18),e.mxI("ngModelChange",function(t){e.eBV(n);const r=e.XpG();return e.DH7(r.newAddress.city,t)||(r.newAddress.city=t),e.Njj(t)}),e.k0s(),e.j41(9,"input",19),e.mxI("ngModelChange",function(t){e.eBV(n);const r=e.XpG();return e.DH7(r.newAddress.province,t)||(r.newAddress.province=t),e.Njj(t)}),e.k0s(),e.j41(10,"input",20),e.mxI("ngModelChange",function(t){e.eBV(n);const r=e.XpG();return e.DH7(r.newAddress.postalCode,t)||(r.newAddress.postalCode=t),e.Njj(t)}),e.k0s(),e.j41(11,"button",21),e.bIt("click",function(){e.eBV(n);const t=e.XpG();return e.Njj(t.addAddress())}),e.EFF(12," Toevoegen "),e.k0s()()}if(2&s){const n=e.XpG();e.R7$(3),e.Y8G("ngForOf",n.addresses),e.R7$(4),e.R50("ngModel",n.newAddress.addressLine),e.R7$(),e.R50("ngModel",n.newAddress.city),e.R7$(),e.R50("ngModel",n.newAddress.province),e.R7$(),e.R50("ngModel",n.newAddress.postalCode)}}function C(s,d){if(1&s){const n=e.RV6();e.j41(0,"div",26),e.bIt("click",function(){const t=e.eBV(n).$implicit,r=e.XpG(2);return e.Njj(r.goToOrder(t.id))}),e.j41(1,"div")(2,"strong"),e.EFF(3),e.k0s(),e.nrm(4,"br"),e.EFF(5),e.nI1(6,"date"),e.nrm(7,"br"),e.j41(8,"span",27),e.EFF(9),e.k0s()(),e.j41(10,"div",28),e.EFF(11),e.k0s()()}if(2&s){const n=d.$implicit;e.R7$(3),e.SpI("Bestelling #",n.orderNumber,""),e.R7$(2),e.SpI(" ",e.i5U(6,10,n.createdAt,"medium"),""),e.R7$(3),e.AVh("pending","Pending"===n.status)("paid","Paid"===n.status)("cancelled","Cancelled"===n.status),e.R7$(),e.SpI(" ",n.status," "),e.R7$(2),e.SpI(" \u20ac",n.totalPrice," ")}}function P(s,d){1&s&&(e.j41(0,"p",29),e.EFF(1,"Geen bestellingen gevonden."),e.k0s())}function M(s,d){if(1&s){const n=e.RV6();e.j41(0,"div",10)(1,"h4"),e.EFF(2,"Mijn bestellingen"),e.k0s(),e.DNE(3,C,12,13,"div",24),e.j41(4,"app-pagination",25),e.mxI("currentPageChange",function(t){e.eBV(n);const r=e.XpG();return e.DH7(r.orderPage,t)||(r.orderPage=t),e.Njj(t)}),e.k0s(),e.DNE(5,P,2,0,"ng-template",null,0,e.C5r),e.k0s()}if(2&s){const n=e.XpG();e.R7$(3),e.Y8G("ngForOf",n.pagedOrders),e.R7$(),e.Y8G("totalItems",n.orders.length)("pageSize",n.orderPageSize),e.R50("currentPage",n.orderPage)}}let k=(()=>{class s{route;userService;addressService;orderService;router;user={};profileMessage="";addresses=[];orders=[];activeTab="profile";newAddress={userId:0,addressLine:"",city:"",province:"",postalCode:"",isDefault:!1};orderPage=1;orderPageSize=5;constructor(n,o,t,r,j){this.route=n,this.userService=o,this.addressService=t,this.orderService=r,this.router=j}ngOnInit(){this.route.queryParams.subscribe(n=>{const o=n.tab;o&&(this.activeTab=o)}),this.userService.currentUser$.subscribe(n=>{this.user=n,n&&(this.loadAddresses(),this.loadOrders())})}saveProfile(){this.userService.updateProfile(this.user.id,{fullName:this.user.fullName,phone:this.user.phone}).subscribe(()=>{this.profileMessage="Profiel succesvol bijgewerkt!"})}loadAddresses(){this.addressService.getByUserId(this.user.id).subscribe(n=>{this.addresses=n})}addAddress(){this.addressService.addAddress(this.user.id,{addressLine:this.newAddress.addressLine,city:this.newAddress.city,province:this.newAddress.province,postalCode:this.newAddress.postalCode,isDefault:!1}).subscribe(()=>{this.loadAddresses()})}goToOrder(n){this.router.navigate(["/order",n])}deleteAddress(n){this.addressService.deleteAddress(n).subscribe(()=>{this.loadAddresses()})}loadOrders(){this.orderService.getOrdersByCustomer(this.user.id).subscribe(n=>{this.orders=n})}get pagedOrders(){const n=(this.orderPage-1)*this.orderPageSize;return this.orders.slice(n,n+this.orderPageSize)}static \u0275fac=function(o){return new(o||s)(e.rXU(_.nX),e.rXU(g.D),e.rXU(u.E),e.rXU(m.Q),e.rXU(_.Ix))};static \u0275cmp=e.VBU({type:s,selectors:[["app-profile"]],decls:19,vars:9,consts:[["noOrder",""],[1,"account-container"],[1,"page-title"],[1,"nav","nav-tabs","account-tabs"],[1,"nav-item"],[1,"nav-link",3,"click"],[1,"bi","bi-person-circle","me-2"],[1,"bi","bi-geo-alt","me-2"],[1,"bi","bi-bag-check","me-2"],["class","tab-body card",4,"ngIf"],[1,"tab-body","card"],[1,"form-control",3,"ngModelChange","ngModel"],["disabled","",1,"form-control",3,"value"],[1,"btn","btn-dark","mt-3","w-100",3,"click"],["class","alert alert-success mt-2",4,"ngIf"],[1,"alert","alert-success","mt-2"],["class","address-item",4,"ngFor","ngForOf"],["placeholder","Adres",1,"form-control",3,"ngModelChange","ngModel"],["placeholder","Stad",1,"form-control",3,"ngModelChange","ngModel"],["placeholder","Provincie",1,"form-control",3,"ngModelChange","ngModel"],["placeholder","Postcode",1,"form-control",3,"ngModelChange","ngModel"],[1,"btn","btn-dark","mt-2","w-100",3,"click"],[1,"address-item"],[1,"btn","btn-sm","btn-danger",3,"click"],["class","order-item clickable",3,"click",4,"ngFor","ngForOf"],[3,"currentPageChange","totalItems","pageSize","currentPage"],[1,"order-item","clickable",3,"click"],[1,"status"],[1,"price"],[1,"empty"]],template:function(o,t){1&o&&(e.j41(0,"div",1)(1,"h2",2),e.EFF(2,"Mijn account"),e.k0s(),e.j41(3,"ul",3)(4,"li",4)(5,"a",5),e.bIt("click",function(){return t.activeTab="profile"}),e.nrm(6,"i",6),e.EFF(7," Persoonlijke gegevens "),e.k0s()(),e.j41(8,"li",4)(9,"a",5),e.bIt("click",function(){return t.activeTab="address"}),e.nrm(10,"i",7),e.EFF(11," Mijn adressen "),e.k0s()(),e.j41(12,"li",4)(13,"a",5),e.bIt("click",function(){return t.activeTab="orders"}),e.nrm(14,"i",8),e.EFF(15," Mijn bestellingen "),e.k0s()()(),e.DNE(16,v,15,4,"div",9)(17,h,13,5,"div",9)(18,M,7,4,"div",9),e.k0s()),2&o&&(e.R7$(5),e.AVh("active","profile"===t.activeTab),e.R7$(4),e.AVh("active","address"===t.activeTab),e.R7$(4),e.AVh("active","orders"===t.activeTab),e.R7$(3),e.Y8G("ngIf","profile"===t.activeTab),e.R7$(),e.Y8G("ngIf","address"===t.activeTab),e.R7$(),e.Y8G("ngIf","orders"===t.activeTab))},dependencies:[a.MD,a.Sq,a.bT,a.vh,c.YN,c.me,c.BC,c.vS,p.e],styles:[".account-container[_ngcontent-%COMP%]{max-width:900px;margin:40px auto}.page-title[_ngcontent-%COMP%]{font-size:28px;font-weight:700;margin-bottom:20px}.account-tabs[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{cursor:pointer;font-size:15px;padding:12px 20px;font-weight:600;color:#555}.account-tabs[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]{color:#000;border-bottom:3px solid #000}.tab-body[_ngcontent-%COMP%]{margin-top:20px;padding:25px;border-radius:12px;background:#fff;box-shadow:0 4px 12px #00000014}label[_ngcontent-%COMP%]{font-weight:600;margin-top:10px}.form-control[_ngcontent-%COMP%]{padding:12px;border-radius:8px;background:#eef3ff;margin-bottom:8px}.address-item[_ngcontent-%COMP%], .order-item[_ngcontent-%COMP%]{border-bottom:1px solid #eee;border-radius:5px;padding:12px;display:flex;justify-content:space-between}.price[_ngcontent-%COMP%]{font-weight:700;font-size:18px}.order-item.clickable[_ngcontent-%COMP%]{cursor:pointer;transition:.2s}.order-item.clickable[_ngcontent-%COMP%]:hover{background:#f1f1f1;transform:translateY(-2px)}.status[_ngcontent-%COMP%]{padding:5px 12px;border-radius:18px;font-size:12px;color:#fff;font-weight:600}.status.pending[_ngcontent-%COMP%]{background:#f0ad4e}.status.paid[_ngcontent-%COMP%]{background:#28a745}.status.cancelled[_ngcontent-%COMP%]{background:#dc3545}"]})}return s})()}}]);