import{a as z}from"./chunk-KLE6COJF.js";import{b as N,c as F,f as O,n as k}from"./chunk-CPA4YIA4.js";import{a as D}from"./chunk-BJVT3YSA.js";import{e as L}from"./chunk-RYH6ERY7.js";import"./chunk-7VWXCVTQ.js";import{h as P,i as M,k as T,l as b}from"./chunk-NPH7NEJF.js";import{Ba as _,Fa as S,Ka as c,Qa as l,Ta as t,Ua as i,Y as h,Ya as v,Z as x,ab as u,jb as r,kb as d,lb as y,ob as g,pb as f,qb as C,tb as E,vb as w,wa as a,wb as I}from"./chunk-3ZPPO4HR.js";import"./chunk-2VMXMS7J.js";var U=o=>["/admin/customers",o];function V(o,n){o&1&&(t(0,"div"),r(1,"Loading..."),i())}function A(o,n){if(o&1&&(t(0,"tr")(1,"td"),r(2),i(),t(3,"td")(4,"a",9),r(5),i()(),t(6,"td"),r(7),i(),t(8,"td"),r(9),i(),t(10,"td"),r(11),w(12,"date"),i()()),o&2){let e=n.$implicit,s=n.index;a(2),d(s+1),a(2),l("routerLink",E(9,U,e.id)),a(),y(" ",e.fullName," "),a(2),d(e.email),a(2),d(e.phone||"-"),a(2),d(I(12,6,e.createdAt,"medium"))}}function B(o,n){if(o&1){let e=v();t(0,"div")(1,"table",6)(2,"thead")(3,"tr")(4,"th"),r(5,"#"),i(),t(6,"th"),r(7,"Full Name"),i(),t(8,"th"),r(9,"Email"),i(),t(10,"th"),r(11,"Phone"),i(),t(12,"th"),r(13,"Date Registered"),i()()(),t(14,"tbody"),c(15,A,13,11,"tr",7),i()(),t(16,"app-pagination",8),C("currentPageChange",function(p){h(e);let m=u();return f(m.page,p)||(m.page=p),x(p)}),i()()}if(o&2){let e=u();a(15),l("ngForOf",e.paginatedCustomers),a(),l("totalItems",e.filteredCustomers.length)("pageSize",e.pageSize),g("currentPage",e.page)}}var W=class o{constructor(n){this.userService=n}customers=[];loading=!0;searchText="";page=1;pageSize=5;ngOnInit(){this.loadCustomers()}loadCustomers(){this.userService.getAllUsers().subscribe({next:n=>{this.customers=n,this.loading=!1},error:()=>{this.loading=!1,console.error("Cannot load customers!")}})}get filteredCustomers(){if(!this.searchText.trim())return this.customers;let n=this.searchText.toLowerCase();return this.customers.filter(e=>e.fullName.toLowerCase().includes(n)||e.email.toLowerCase().includes(n))}get paginatedCustomers(){let n=(this.page-1)*this.pageSize;return this.filteredCustomers.slice(n,n+this.pageSize)}static \u0275fac=function(e){return new(e||o)(_(z))};static \u0275cmp=S({type:o,selectors:[["app-customers"]],decls:8,vars:3,consts:[[1,"row"],[1,"col-sm-9"],[1,"page-title"],[1,"col-sm-3","right"],["type","text","placeholder","Search...",1,"search-input",3,"ngModelChange","ngModel"],[4,"ngIf"],[1,"table"],[4,"ngFor","ngForOf"],[3,"currentPageChange","totalItems","pageSize","currentPage"],[1,"customer-link",3,"routerLink"]],template:function(e,s){e&1&&(t(0,"div",0)(1,"div",1)(2,"h2",2),r(3,"Customers"),i()(),t(4,"div",3)(5,"input",4),C("ngModelChange",function(m){return f(s.searchText,m)||(s.searchText=m),m}),i()()(),c(6,V,2,0,"div",5)(7,B,17,4,"div",5)),e&2&&(a(5),g("ngModel",s.searchText),a(),l("ngIf",s.loading),a(),l("ngIf",!s.loading))},dependencies:[L,b,P,M,T,k,N,F,O,D],styles:["input[type=text][_ngcontent-%COMP%]{padding:8px 12px;border-radius:6px;border:1px solid #ccc;width:100%}.customer-link[_ngcontent-%COMP%]{color:#006eff}.customer-link[_ngcontent-%COMP%]:hover{text-decoration:underline}"]})};export{W as CustomersComponent};
