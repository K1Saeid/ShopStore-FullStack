import{a as j,b as D}from"./chunk-JJDORND2.js";import{a as U}from"./chunk-PMD22CQW.js";import{b as I,c as x,d as A,e as N,f as L,g as O,h as T,j as F,k,l as B,m as q,n as z}from"./chunk-CPA4YIA4.js";import{a as V}from"./chunk-RNT3NOGQ.js";import{d as W}from"./chunk-RYH6ERY7.js";import"./chunk-7VWXCVTQ.js";import{h as b,i as w,l as E}from"./chunk-NPH7NEJF.js";import{$a as M,Ba as u,Fa as C,Ka as f,Qa as s,Ta as i,Ua as n,Va as S,ab as _,jb as o,lb as y,ob as p,pb as g,qb as m,sa as h,sb as v,tb as P,wa as r}from"./chunk-3ZPPO4HR.js";import"./chunk-2VMXMS7J.js";var X=()=>["advlist autolink lists link image charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime media table paste code help wordcount"],G=d=>({height:350,menubar:!0,plugins:d,toolbar:"undo redo | blocks | bold italic underline forecolor | alignleft aligncenter alignright alignjustify | bullist numlist | link image | table | removeformat"});function K(d,l){if(d&1&&(i(0,"div",27),o(1),n()),d&2){let a=_();r(),y(" ",a.successMessage,`
`)}}function Y(d,l){if(d&1&&(i(0,"div",28),o(1),n()),d&2){let a=_();r(),y(" ",a.errorMessage,`
`)}}function H(d,l){if(d&1&&(i(0,"option",9),o(1),n()),d&2){let a=l.$implicit;s("ngValue",a.id),r(),y(" ",a.name," ")}}function J(d,l){if(d&1&&S(0,"img",29),d&2){let a=_();s("src",a.previewImage,h)}}var R=class d{constructor(l,a,t){this.productService=l;this.router=a;this.categoryService=t}successMessage="";errorMessage="";selectedFile=null;previewImage=null;categories=[];product={name:"",description:"",brand:"",gender:"UNISEX",sizes:"",colors:"",price:0,discountPrice:0,itemsLeft:0,inStock:!0,imageUrl:"",slug:"",categoryId:null,categoryName:""};loading=!1;ngOnInit(){this.loadCategories()}loadCategories(){this.categoryService.getAll().subscribe(l=>{this.categories=l})}submit(){if(this.loading=!0,this.errorMessage="",this.successMessage="",this.product.slug=this.product.name.toLowerCase().replace(/ /g,"-"),!this.product.categoryId){this.errorMessage="Please select a category!",this.loading=!1;return}this.selectedFile?this.productService.uploadImage(this.selectedFile).subscribe({next:l=>{this.product.imageUrl=l.imageUrl,this.saveProduct()},error:()=>{this.errorMessage="Error uploading image!",this.loading=!1}}):this.saveProduct()}saveProduct(){this.product.categoryId=Number(this.product.categoryId),this.productService.createProduct(this.product).subscribe({next:()=>{this.successMessage="Product added!",setTimeout(()=>this.router.navigate(["/admin/products"]),1500)},error:()=>{this.errorMessage="Error adding product!",this.loading=!1}})}onFileSelected(l){this.selectedFile=l.target.files[0];let a=new FileReader;a.onload=()=>{this.previewImage=a.result},a.readAsDataURL(this.selectedFile)}static \u0275fac=function(a){return new(a||d)(u(V),u(W),u(U))};static \u0275cmp=C({type:d,selectors:[["app-add-product"]],decls:70,vars:23,consts:[[1,"page-title"],["class","alert alert-success","role","alert",4,"ngIf"],["class","alert alert-danger","role","alert",4,"ngIf"],[3,"ngSubmit"],[1,"form-grid"],[1,"form-group"],["type","text","name","name","required","",3,"ngModelChange","ngModel"],["type","text","name","brand","required","",3,"ngModelChange","ngModel"],["name","categoryId","required","",3,"ngModelChange","ngModel"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],["name","gender",3,"ngModelChange","ngModel"],["value","UNISEX"],["value","MEN"],["value","WOMEN"],["type","number","name","price","required","",3,"ngModelChange","ngModel"],["type","number","name","discountPrice",3,"ngModelChange","ngModel"],["type","number","name","itemsLeft","required","",3,"ngModelChange","ngModel"],["name","inStock",3,"ngModelChange","ngModel"],[3,"value"],[1,"form-group","full-width"],["type","text","name","sizes","placeholder","6,7,8,9",3,"ngModelChange","ngModel"],["type","text","name","colors","placeholder","White,Black",3,"ngModelChange","ngModel"],["apiKey","4qqexv2l5k4f1ewaj0bplmi9laf4mw63sqgsj7tpz51re5iq","name","description",3,"ngModelChange","ngModel","init"],["type","file",3,"change"],["class","preview",3,"src",4,"ngIf"],[1,"btn-submit",3,"disabled"],["role","alert",1,"alert","alert-success"],["role","alert",1,"alert","alert-danger"],[1,"preview",3,"src"]],template:function(a,t){a&1&&(i(0,"h2",0),o(1,"Add New Product"),n(),f(2,K,2,1,"div",1)(3,Y,2,1,"div",2),i(4,"form",3),M("ngSubmit",function(){return t.submit()}),i(5,"div",4)(6,"div",5)(7,"label"),o(8,"Name"),n(),i(9,"input",6),m("ngModelChange",function(e){return g(t.product.name,e)||(t.product.name=e),e}),n()(),i(10,"div",5)(11,"label"),o(12,"Brand"),n(),i(13,"input",7),m("ngModelChange",function(e){return g(t.product.brand,e)||(t.product.brand=e),e}),n()(),i(14,"div",5)(15,"label"),o(16,"Category"),n(),i(17,"select",8),m("ngModelChange",function(e){return g(t.product.categoryId,e)||(t.product.categoryId=e),e}),i(18,"option",9),o(19,"-- Select Category --"),n(),f(20,H,2,2,"option",10),n()(),i(21,"div",5)(22,"label"),o(23,"Gender"),n(),i(24,"select",11),m("ngModelChange",function(e){return g(t.product.gender,e)||(t.product.gender=e),e}),i(25,"option",12),o(26,"UNISEX"),n(),i(27,"option",13),o(28,"MEN"),n(),i(29,"option",14),o(30,"WOMEN"),n()()(),i(31,"div",5)(32,"label"),o(33,"Price ($)"),n(),i(34,"input",15),m("ngModelChange",function(e){return g(t.product.price,e)||(t.product.price=e),e}),n()(),i(35,"div",5)(36,"label"),o(37,"Discount Price ($)"),n(),i(38,"input",16),m("ngModelChange",function(e){return g(t.product.discountPrice,e)||(t.product.discountPrice=e),e}),n()(),i(39,"div",5)(40,"label"),o(41,"Items Left"),n(),i(42,"input",17),m("ngModelChange",function(e){return g(t.product.itemsLeft,e)||(t.product.itemsLeft=e),e}),n()(),i(43,"div",5)(44,"label"),o(45,"In Stock"),n(),i(46,"select",18),m("ngModelChange",function(e){return g(t.product.inStock,e)||(t.product.inStock=e),e}),i(47,"option",19),o(48,"Yes"),n(),i(49,"option",19),o(50,"No"),n()()(),i(51,"div",20)(52,"label"),o(53,"Sizes (comma separated)"),n(),i(54,"input",21),m("ngModelChange",function(e){return g(t.product.sizes,e)||(t.product.sizes=e),e}),n()(),i(55,"div",20)(56,"label"),o(57,"Colors (comma separated)"),n(),i(58,"input",22),m("ngModelChange",function(e){return g(t.product.colors,e)||(t.product.colors=e),e}),n()(),i(59,"div",20)(60,"label"),o(61,"Description"),n(),i(62,"editor",23),m("ngModelChange",function(e){return g(t.product.description,e)||(t.product.description=e),e}),n()(),i(63,"div",20)(64,"label"),o(65,"Product Image"),n(),i(66,"input",24),M("change",function(e){return t.onFileSelected(e)}),n(),f(67,J,1,1,"img",25),n()(),i(68,"button",26),o(69,"Add Product"),n()()),a&2&&(r(2),s("ngIf",t.successMessage),r(),s("ngIf",t.errorMessage),r(6),p("ngModel",t.product.name),r(4),p("ngModel",t.product.brand),r(4),p("ngModel",t.product.categoryId),r(),s("ngValue",null),r(2),s("ngForOf",t.categories),r(4),p("ngModel",t.product.gender),r(10),p("ngModel",t.product.price),r(4),p("ngModel",t.product.discountPrice),r(4),p("ngModel",t.product.itemsLeft),r(4),p("ngModel",t.product.inStock),r(),s("value",!0),r(2),s("value",!1),r(5),p("ngModel",t.product.sizes),r(4),p("ngModel",t.product.colors),r(4),p("ngModel",t.product.description),s("init",P(21,G,v(20,X))),r(5),s("ngIf",t.previewImage),r(),s("disabled",t.loading))},dependencies:[E,b,w,z,O,k,B,I,T,F,x,A,q,L,N,D,j],styles:[".page-title[_ngcontent-%COMP%]{font-size:26px;font-weight:700;margin-bottom:20px}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:20px}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column}.form-group.full-width[_ngcontent-%COMP%]{grid-column:span 2}label[_ngcontent-%COMP%]{font-weight:600;margin-bottom:6px}input[_ngcontent-%COMP%], select[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{padding:10px;border-radius:8px;border:1px solid #ccc}textarea[_ngcontent-%COMP%]{min-height:120px}.btn-submit[_ngcontent-%COMP%]{margin-top:20px;padding:12px 20px;background:#0d6efd;border-radius:8px;color:#fff;font-size:16px;cursor:pointer;border:none}.preview[_ngcontent-%COMP%]{width:120px;height:120px;object-fit:cover;margin-top:10px;border-radius:10px}"]})};export{R as AddProductComponent};
