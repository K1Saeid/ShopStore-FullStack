"use strict";(self.webpackChunkshop_web=self.webpackChunkshop_web||[]).push([[857],{5857:(E,g,l)=>{l.r(g),l.d(g,{AddProductComponent:()=>F});var c=l(2881),d=l(4341),u=l(7993),e=l(1360),p=l(6241),m=l(9315),_=l(4354);const M=()=>["advlist autolink lists link image charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime media table paste code help wordcount"],h=o=>({height:350,menubar:!0,plugins:o,toolbar:"undo redo | blocks | bold italic underline forecolor | alignleft aligncenter alignright alignjustify | bullist numlist | link image | table | removeformat"});function f(o,a){if(1&o&&(e.j41(0,"div",27),e.EFF(1),e.k0s()),2&o){const r=e.XpG();e.R7$(),e.SpI(" ",r.successMessage,"\n")}}function C(o,a){if(1&o&&(e.j41(0,"div",28),e.EFF(1),e.k0s()),2&o){const r=e.XpG();e.R7$(),e.SpI(" ",r.errorMessage,"\n")}}function P(o,a){if(1&o&&(e.j41(0,"option",9),e.EFF(1),e.k0s()),2&o){const r=a.$implicit;e.Y8G("ngValue",r.id),e.R7$(),e.SpI(" ",r.name," ")}}function b(o,a){if(1&o&&e.nrm(0,"img",29),2&o){const r=e.XpG();e.Y8G("src",r.previewImage,e.B4B)}}let F=(()=>{class o{productService;router;categoryService;successMessage="";errorMessage="";selectedFile=null;previewImage=null;categories=[];product={name:"",description:"",brand:"",gender:"UNISEX",sizes:"",colors:"",price:0,discountPrice:0,itemsLeft:0,inStock:!0,imageUrl:"",slug:"",categoryId:null,categoryName:""};loading=!1;constructor(r,s,n){this.productService=r,this.router=s,this.categoryService=n}ngOnInit(){this.loadCategories()}loadCategories(){this.categoryService.getAll().subscribe(r=>{this.categories=r})}submit(){if(this.loading=!0,this.errorMessage="",this.successMessage="",this.product.slug=this.product.name.toLowerCase().replace(/ /g,"-"),!this.product.categoryId)return this.errorMessage="Please select a category!",void(this.loading=!1);this.selectedFile?this.productService.uploadImage(this.selectedFile).subscribe({next:r=>{this.product.imageUrl=r.imageUrl,this.saveProduct()},error:()=>{this.errorMessage="Error uploading image!",this.loading=!1}}):this.saveProduct()}saveProduct(){this.product.categoryId=Number(this.product.categoryId),this.productService.createProduct(this.product).subscribe({next:()=>{this.successMessage="Product added!",setTimeout(()=>this.router.navigate(["/admin/products"]),1500)},error:()=>{this.errorMessage="Error adding product!",this.loading=!1}})}onFileSelected(r){this.selectedFile=r.target.files[0];const s=new FileReader;s.onload=()=>{this.previewImage=s.result},s.readAsDataURL(this.selectedFile)}static \u0275fac=function(s){return new(s||o)(e.rXU(p.b),e.rXU(m.Ix),e.rXU(_.M))};static \u0275cmp=e.VBU({type:o,selectors:[["app-add-product"]],decls:70,vars:23,consts:[[1,"page-title"],["class","alert alert-success","role","alert",4,"ngIf"],["class","alert alert-danger","role","alert",4,"ngIf"],[3,"ngSubmit"],[1,"form-grid"],[1,"form-group"],["type","text","name","name","required","",3,"ngModelChange","ngModel"],["type","text","name","brand","required","",3,"ngModelChange","ngModel"],["name","categoryId","required","",3,"ngModelChange","ngModel"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],["name","gender",3,"ngModelChange","ngModel"],["value","UNISEX"],["value","MEN"],["value","WOMEN"],["type","number","name","price","required","",3,"ngModelChange","ngModel"],["type","number","name","discountPrice",3,"ngModelChange","ngModel"],["type","number","name","itemsLeft","required","",3,"ngModelChange","ngModel"],["name","inStock",3,"ngModelChange","ngModel"],[3,"value"],[1,"form-group","full-width"],["type","text","name","sizes","placeholder","6,7,8,9",3,"ngModelChange","ngModel"],["type","text","name","colors","placeholder","White,Black",3,"ngModelChange","ngModel"],["apiKey","4qqexv2l5k4f1ewaj0bplmi9laf4mw63sqgsj7tpz51re5iq","name","description",3,"ngModelChange","ngModel","init"],["type","file",3,"change"],["class","preview",3,"src",4,"ngIf"],[1,"btn-submit",3,"disabled"],["role","alert",1,"alert","alert-success"],["role","alert",1,"alert","alert-danger"],[1,"preview",3,"src"]],template:function(s,n){1&s&&(e.j41(0,"h2",0),e.EFF(1,"Add New Product"),e.k0s(),e.DNE(2,f,2,1,"div",1)(3,C,2,1,"div",2),e.j41(4,"form",3),e.bIt("ngSubmit",function(){return n.submit()}),e.j41(5,"div",4)(6,"div",5)(7,"label"),e.EFF(8,"Name"),e.k0s(),e.j41(9,"input",6),e.mxI("ngModelChange",function(t){return e.DH7(n.product.name,t)||(n.product.name=t),t}),e.k0s()(),e.j41(10,"div",5)(11,"label"),e.EFF(12,"Brand"),e.k0s(),e.j41(13,"input",7),e.mxI("ngModelChange",function(t){return e.DH7(n.product.brand,t)||(n.product.brand=t),t}),e.k0s()(),e.j41(14,"div",5)(15,"label"),e.EFF(16,"Category"),e.k0s(),e.j41(17,"select",8),e.mxI("ngModelChange",function(t){return e.DH7(n.product.categoryId,t)||(n.product.categoryId=t),t}),e.j41(18,"option",9),e.EFF(19,"-- Select Category --"),e.k0s(),e.DNE(20,P,2,2,"option",10),e.k0s()(),e.j41(21,"div",5)(22,"label"),e.EFF(23,"Gender"),e.k0s(),e.j41(24,"select",11),e.mxI("ngModelChange",function(t){return e.DH7(n.product.gender,t)||(n.product.gender=t),t}),e.j41(25,"option",12),e.EFF(26,"UNISEX"),e.k0s(),e.j41(27,"option",13),e.EFF(28,"MEN"),e.k0s(),e.j41(29,"option",14),e.EFF(30,"WOMEN"),e.k0s()()(),e.j41(31,"div",5)(32,"label"),e.EFF(33,"Price ($)"),e.k0s(),e.j41(34,"input",15),e.mxI("ngModelChange",function(t){return e.DH7(n.product.price,t)||(n.product.price=t),t}),e.k0s()(),e.j41(35,"div",5)(36,"label"),e.EFF(37,"Discount Price ($)"),e.k0s(),e.j41(38,"input",16),e.mxI("ngModelChange",function(t){return e.DH7(n.product.discountPrice,t)||(n.product.discountPrice=t),t}),e.k0s()(),e.j41(39,"div",5)(40,"label"),e.EFF(41,"Items Left"),e.k0s(),e.j41(42,"input",17),e.mxI("ngModelChange",function(t){return e.DH7(n.product.itemsLeft,t)||(n.product.itemsLeft=t),t}),e.k0s()(),e.j41(43,"div",5)(44,"label"),e.EFF(45,"In Stock"),e.k0s(),e.j41(46,"select",18),e.mxI("ngModelChange",function(t){return e.DH7(n.product.inStock,t)||(n.product.inStock=t),t}),e.j41(47,"option",19),e.EFF(48,"Yes"),e.k0s(),e.j41(49,"option",19),e.EFF(50,"No"),e.k0s()()(),e.j41(51,"div",20)(52,"label"),e.EFF(53,"Sizes (comma separated)"),e.k0s(),e.j41(54,"input",21),e.mxI("ngModelChange",function(t){return e.DH7(n.product.sizes,t)||(n.product.sizes=t),t}),e.k0s()(),e.j41(55,"div",20)(56,"label"),e.EFF(57,"Colors (comma separated)"),e.k0s(),e.j41(58,"input",22),e.mxI("ngModelChange",function(t){return e.DH7(n.product.colors,t)||(n.product.colors=t),t}),e.k0s()(),e.j41(59,"div",20)(60,"label"),e.EFF(61,"Description"),e.k0s(),e.j41(62,"editor",23),e.mxI("ngModelChange",function(t){return e.DH7(n.product.description,t)||(n.product.description=t),t}),e.k0s()(),e.j41(63,"div",20)(64,"label"),e.EFF(65,"Product Image"),e.k0s(),e.j41(66,"input",24),e.bIt("change",function(t){return n.onFileSelected(t)}),e.k0s(),e.DNE(67,b,1,1,"img",25),e.k0s()(),e.j41(68,"button",26),e.EFF(69,"Add Product"),e.k0s()()),2&s&&(e.R7$(2),e.Y8G("ngIf",n.successMessage),e.R7$(),e.Y8G("ngIf",n.errorMessage),e.R7$(6),e.R50("ngModel",n.product.name),e.R7$(4),e.R50("ngModel",n.product.brand),e.R7$(4),e.R50("ngModel",n.product.categoryId),e.R7$(),e.Y8G("ngValue",null),e.R7$(2),e.Y8G("ngForOf",n.categories),e.R7$(4),e.R50("ngModel",n.product.gender),e.R7$(10),e.R50("ngModel",n.product.price),e.R7$(4),e.R50("ngModel",n.product.discountPrice),e.R7$(4),e.R50("ngModel",n.product.itemsLeft),e.R7$(4),e.R50("ngModel",n.product.inStock),e.R7$(),e.Y8G("value",!0),e.R7$(2),e.Y8G("value",!1),e.R7$(5),e.R50("ngModel",n.product.sizes),e.R7$(4),e.R50("ngModel",n.product.colors),e.R7$(4),e.R50("ngModel",n.product.description),e.Y8G("init",e.eq3(21,h,e.lJ4(20,M))),e.R7$(5),e.Y8G("ngIf",n.previewImage),e.R7$(),e.Y8G("disabled",n.loading))},dependencies:[c.MD,c.Sq,c.bT,d.YN,d.qT,d.xH,d.y7,d.me,d.Q0,d.wz,d.BC,d.cb,d.YS,d.vS,d.cV,u.sv,u.xn],styles:[".page-title[_ngcontent-%COMP%]{font-size:26px;font-weight:700;margin-bottom:20px}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:20px}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column}.form-group.full-width[_ngcontent-%COMP%]{grid-column:span 2}label[_ngcontent-%COMP%]{font-weight:600;margin-bottom:6px}input[_ngcontent-%COMP%], select[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{padding:10px;border-radius:8px;border:1px solid #ccc}textarea[_ngcontent-%COMP%]{min-height:120px}.btn-submit[_ngcontent-%COMP%]{margin-top:20px;padding:12px 20px;background:#0d6efd;border-radius:8px;color:#fff;font-size:16px;cursor:pointer;border:none}.preview[_ngcontent-%COMP%]{width:120px;height:120px;object-fit:cover;margin-top:10px;border-radius:10px}"]})}return o})()}}]);