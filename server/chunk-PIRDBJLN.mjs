import './polyfills.server.mjs';
import{a as B}from"./chunk-JA5OA5QV.mjs";import{a as j}from"./chunk-YX6I325E.mjs";import{i as I}from"./chunk-EY6CEKKC.mjs";import"./chunk-YUFWBB53.mjs";import{b as N,c as L,f as W,j as D,k as F,l as z,n as A}from"./chunk-25CODJY3.mjs";import{j as y,k as E,m as T,n as V}from"./chunk-GDXHRO5M.mjs";import{Aa as a,Bb as w,Cb as k,Fa as v,Ja as P,Oa as O,Wa as m,Ya as M,Z as c,Za as t,_ as p,_a as n,cb as x,fb as g,gb as u,pb as i,qb as _,rb as h,ub as f,vb as C,wb as b,zb as S}from"./chunk-LEXWQGSC.mjs";import"./chunk-S6KH3LOX.mjs";var R=s=>["/admin/customers",s],q=s=>["/admin/orders",s];function G(s,r){if(s&1){let e=x();t(0,"tr")(1,"td"),i(2),n(),t(3,"td"),i(4),n(),t(5,"td",9),i(6),n(),t(7,"td"),i(8),w(9,"date"),n(),t(10,"td"),i(11),n(),t(12,"td")(13,"span",10),i(14),n()(),t(15,"td")(16,"button",11),i(17," View "),n(),t(18,"button",12),g("click",function(){let d=c(e).$implicit,l=u();return p(l.openStatusModal(d))}),i(19," Update "),n()()()}if(s&2){let e=r.$implicit;a(2),_(e.id),a(2),_(e.orderNumber),a(),m("routerLink",S(17,R,e.user.id)),a(),_(e.user==null?null:e.user.fullName),a(2),_(k(9,14,e.createdAt,"medium")),a(3),h("\u20AC",e.totalPrice,""),a(2),M("pending",e.status==="Pending")("paid",e.status==="Paid")("cancelled",e.status==="Cancelled"),a(),h(" ",e.status," "),a(2),m("routerLink",S(19,q,e.id))}}function H(s,r){if(s&1){let e=x();t(0,"div",13),g("click",function(){c(e);let d=u();return p(d.closeStatusModal())}),n()}}function J(s,r){if(s&1){let e=x();t(0,"div",14)(1,"div",15),g("click",function(d){return c(e),p(d.stopPropagation())}),t(2,"h3"),i(3,"Update Order Status"),n(),t(4,"select",16),b("ngModelChange",function(d){c(e);let l=u();return C(l.selectedStatus,d)||(l.selectedStatus=d),p(d)}),t(5,"option",17),i(6,"Pending"),n(),t(7,"option",18),i(8,"Paid"),n(),t(9,"option",19),i(10,"Cancelled"),n()(),t(11,"div",20)(12,"button",21),g("click",function(){c(e);let d=u();return p(d.saveStatus())}),i(13,"Save"),n(),t(14,"button",22),g("click",function(){c(e);let d=u();return p(d.closeStatusModal())}),i(15,"Cancel"),n()()()()}if(s&2){let e=u();a(4),f("ngModel",e.selectedStatus)}}var U=class s{constructor(r){this.orderService=r}page=1;pageSize=8;orders=[];searchText="";loading=!0;modalOpen=!1;selectedOrder=null;selectedStatus="Pending";ngOnInit(){this.orderService.getAllOrder().subscribe(r=>{this.orders=r,this.loading=!1})}loadOrders(){this.orderService.getAllOrders().subscribe(r=>{this.orders=r})}openStatusModal(r){this.selectedOrder=r,this.selectedStatus=r.status,this.modalOpen=!0}closeStatusModal(){this.modalOpen=!1}saveStatus(){this.orderService.updateOrderStatus(this.selectedOrder.id,this.selectedStatus).subscribe(()=>{this.selectedOrder.status=this.selectedStatus,this.modalOpen=!1})}get filteredOrders(){if(!this.searchText.trim())return this.orders;let r=this.searchText.toLowerCase();return this.orders.filter(e=>e.orderNumber.toLowerCase().includes(r)||e.user?.fullName?.toLowerCase().includes(r)||e.status?.toLowerCase().includes(r))}get pagedOrders(){let r=(this.page-1)*this.pageSize;return this.filteredOrders.slice(r,r+this.pageSize)}static \u0275fac=function(e){return new(e||s)(v(j))};static \u0275cmp=P({type:s,selectors:[["app-admin-orders"]],decls:28,vars:7,consts:[[1,"orders-container"],[1,"page-header"],["type","text","placeholder","Search orders...",3,"ngModelChange","ngModel"],[1,"orders-table-wrapper"],[1,"orders-table"],[4,"ngFor","ngForOf"],[3,"currentPageChange","totalItems","pageSize","currentPage"],["class","modal-backdrop",3,"click",4,"ngIf"],["class","modal",4,"ngIf"],[1,"user",3,"routerLink"],[1,"status"],[1,"btn-view",3,"routerLink"],[1,"btn-edit",3,"click"],[1,"modal-backdrop",3,"click"],[1,"modal"],[1,"modal-content",3,"click"],[1,"form-select",3,"ngModelChange","ngModel"],["value","Pending"],["value","Paid"],["value","Cancelled"],[1,"modal-actions"],[1,"btn-save",3,"click"],[1,"btn-cancel",3,"click"]],template:function(e,o){e&1&&(t(0,"div",0)(1,"div",1)(2,"h2"),i(3,"Orders"),n(),t(4,"input",2),b("ngModelChange",function(l){return C(o.searchText,l)||(o.searchText=l),l}),n()(),t(5,"div",3)(6,"table",4)(7,"thead")(8,"tr")(9,"th"),i(10,"ID"),n(),t(11,"th"),i(12,"Order Number"),n(),t(13,"th"),i(14,"User"),n(),t(15,"th"),i(16,"Date"),n(),t(17,"th"),i(18,"Total"),n(),t(19,"th"),i(20,"Status"),n(),t(21,"th"),i(22,"Actions"),n()()(),t(23,"tbody"),O(24,G,20,21,"tr",5),n()()(),t(25,"app-pagination",6),b("currentPageChange",function(l){return C(o.page,l)||(o.page=l),l}),n()(),O(26,H,1,0,"div",7)(27,J,16,1,"div",8)),e&2&&(a(4),f("ngModel",o.searchText),a(20),m("ngForOf",o.pagedOrders),a(),m("totalItems",o.filteredOrders.length)("pageSize",o.pageSize),f("currentPage",o.page),a(),m("ngIf",o.modalOpen),a(),m("ngIf",o.modalOpen))},dependencies:[V,y,E,T,A,F,z,N,D,L,W,I,B],styles:[".orders-container[_ngcontent-%COMP%]{padding:25px}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:20px}.page-header[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:280px;padding:8px 12px;border-radius:8px;border:1px solid #ddd}.orders-table-wrapper[_ngcontent-%COMP%]{background:#fff;padding:20px;border-radius:14px;box-shadow:0 4px 20px #0000000d}.orders-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.orders-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-align:left;padding:12px;color:#555;font-weight:600;border-bottom:1px solid #eee}.orders-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px;border-bottom:1px solid #f5f5f5}.status[_ngcontent-%COMP%]{padding:5px 12px;border-radius:18px;font-size:12px;color:#fff;font-weight:600}.status.pending[_ngcontent-%COMP%]{background:#f0ad4e}.status.paid[_ngcontent-%COMP%]{background:#28a745}.status.cancelled[_ngcontent-%COMP%]{background:#dc3545}.btn-view[_ngcontent-%COMP%]{background:#007bff;color:#fff;padding:6px 12px;border-radius:6px;border:none;cursor:pointer}.btn-edit[_ngcontent-%COMP%]{background:#444;color:#fff;padding:6px 12px;border-radius:6px;border:none;margin-left:8px;cursor:pointer}.btn-edit[_ngcontent-%COMP%]:hover{background:#000}.modal-backdrop[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000073}.modal[_ngcontent-%COMP%]{position:fixed;inset:0;display:flex;justify-content:center;align-items:center}.modal-content[_ngcontent-%COMP%]{background:#fff;padding:22px;width:350px;border-radius:12px;box-shadow:0 10px 30px #0000001a}.modal-actions[_ngcontent-%COMP%]{margin-top:15px;display:flex;gap:10px}.btn-save[_ngcontent-%COMP%]{background:#111;color:#fff;padding:8px;width:100%;border-radius:6px}.btn-cancel[_ngcontent-%COMP%]{background:#bbb;padding:8px;width:100%;border-radius:6px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td.user[_ngcontent-%COMP%]{cursor:pointer;color:#0079fb;transition:.5s ease all}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td.user[_ngcontent-%COMP%]:hover{text-decoration:underline}"]})};export{U as OrdersComponent};
