import './polyfills.server.mjs';
import{a as E}from"./chunk-T74IAKRB.mjs";import{a as q}from"./chunk-WDHLO3IG.mjs";import{i as k}from"./chunk-EY6CEKKC.mjs";import"./chunk-YUFWBB53.mjs";import{n as w}from"./chunk-25CODJY3.mjs";import{j as M,k as O}from"./chunk-GDXHRO5M.mjs";import{$a as g,Aa as a,Db as P,Fa as C,Ja as h,Oa as _,Wa as x,Z as d,Za as n,_ as u,_a as r,cb as y,fb as f,gb as p,ob as S,pb as i,qb as m,rb as b,wa as v}from"./chunk-LEXWQGSC.mjs";import"./chunk-S6KH3LOX.mjs";function T(o,e){if(o&1){let t=y();n(0,"div",7)(1,"div",8),g(2,"img",9),r(),n(3,"div",10)(4,"h4",11),i(5),r(),n(6,"p",12),i(7," Color: "),n(8,"span"),i(9),r(),i(10," | Size: "),n(11,"span"),i(12),r()(),n(13,"p",13),i(14),r(),n(15,"div",14)(16,"button",15),f("click",function(){let c=d(t).$implicit,s=p(2);return u(s.decrease(c))}),i(17,"\u2212"),r(),n(18,"span",16),i(19),r(),n(20,"button",15),f("click",function(){let c=d(t).$implicit,s=p(2);return u(s.increase(c))}),i(21,"+"),r()(),n(22,"button",17),f("click",function(){let c=d(t).$implicit,s=p(2);return u(s.remove(c.id))}),g(23,"i",18),i(24," Remove "),r()()()}if(o&2){let t=e.$implicit;a(2),x("src",t.product.imageUrl,v),a(3),m(t.product.name),a(4),m(t.color),a(3),m(t.size),a(2),b("\u20AC",t.price,""),a(5),m(t.quantity)}}function z(o,e){if(o&1&&(n(0,"div",2)(1,"h2",3),i(2,"Shopping Cart"),r(),_(3,T,25,6,"div",4),n(4,"div",5)(5,"span"),i(6,"Total:"),r(),n(7,"strong"),i(8),r()(),n(9,"button",6),i(10," Proceed to Checkout "),r()()),o&2){let t=p();a(3),x("ngForOf",t.cart.items),a(5),b("\u20AC",t.cart.totalPrice,"")}}function V(o,e){o&1&&(n(0,"h3",19),i(1,"Your cart is empty "),r(),g(2,"p"))}var I=class o{constructor(e,t){this.cartService=e;this.userService=t}cart={items:[]};user;ngOnInit(){this.user=this.userService.getCurrentUser(),this.loadCart()}loadCart(){this.cartService.getCart(this.user.id).subscribe(e=>{this.cart=e,this.cartService.setCartCount(e.items.length)})}increase(e){let t=e.quantity+1;this.cartService.updateQty(e.id,t).subscribe(()=>{e.quantity=t,this.updateTotal()})}decrease(e){if(e.quantity==1)return;let t=e.quantity-1;this.cartService.updateQty(e.id,t).subscribe(()=>{e.quantity=t,this.updateTotal()})}remove(e){this.cartService.removeItem(e).subscribe(()=>{this.cart.items=this.cart.items.filter(t=>t.id!==e),this.updateTotal(),this.cartService.setCartCount(this.cart.items.length)})}clearCart(){this.cartService.clearCart(this.user.id).subscribe(()=>{this.cart.items=[],this.updateTotal(),this.cartService.setCartCount(0)})}updateTotal(){this.cart.totalPrice=this.cart.items.reduce((e,t)=>e+t.price*t.quantity,0)}static \u0275fac=function(t){return new(t||o)(C(E),C(q))};static \u0275cmp=h({type:o,selectors:[["app-cart"]],decls:3,vars:2,consts:[["emptyCart",""],["class","cart-container",4,"ngIf","ngIfElse"],[1,"cart-container"],[1,"cart-title"],["class","cart-item-card",4,"ngFor","ngForOf"],[1,"cart-total-box"],["routerLink","/checkout",1,"checkout-btn","btn-dark"],[1,"cart-item-card"],[1,"cart-img-box"],["alt","",3,"src"],[1,"cart-info"],[1,"product-name"],[1,"product-variant"],[1,"product-price"],[1,"qty-box"],[1,"qty-btn",3,"click"],[1,"qty-number"],[1,"remove-btn",3,"click"],[1,"bi","bi-trash"],[1,"empty-text"]],template:function(t,l){if(t&1&&_(0,z,11,2,"div",1)(1,V,3,0,"ng-template",null,0,P),t&2){let c=S(2);x("ngIf",l.cart.items.length>0)("ngIfElse",c)}},dependencies:[w,M,O,k],styles:[".cart-container[_ngcontent-%COMP%]{max-width:900px;margin:auto;padding:20px}.cart-title[_ngcontent-%COMP%]{font-size:32px;font-weight:700;margin-bottom:25px}.cart-item-card[_ngcontent-%COMP%]{display:flex;background:#fff;padding:18px;border-radius:14px;box-shadow:0 4px 18px #00000014;margin-bottom:20px;transition:.25s}.cart-item-card[_ngcontent-%COMP%]:hover{transform:translateY(-3px);box-shadow:0 7px 22px #0000001f}.cart-img-box[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:120px;height:auto;border-radius:10px}.cart-info[_ngcontent-%COMP%]{flex:1;margin-left:20px}.product-name[_ngcontent-%COMP%]{font-size:20px;font-weight:600;margin-bottom:5px}.product-variant[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:600;color:#111}.product-price[_ngcontent-%COMP%]{font-size:20px;font-weight:700;margin:5px 0 15px}.qty-box[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;margin-bottom:15px}.qty-btn[_ngcontent-%COMP%]{width:36px;height:36px;border:none;cursor:pointer;border-radius:8px;background:#f0f0f0;font-size:18px;transition:.2s}.qty-btn[_ngcontent-%COMP%]:hover{background:#dcdcdc}.qty-number[_ngcontent-%COMP%]{min-width:28px;text-align:center;font-size:18px;font-weight:600}.remove-btn[_ngcontent-%COMP%]{background:#e63946;color:#fff;border:none;padding:8px 18px;border-radius:8px;cursor:pointer;transition:.25s}.remove-btn[_ngcontent-%COMP%]:hover{background:#c91828}.cart-total-box[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;font-size:22px;margin:25px 0 15px;gap:10px}.checkout-btn[_ngcontent-%COMP%]{width:100%;padding:16px;font-size:20px;font-weight:700;color:#fff;background:#292929;border:none;border-radius:12px;cursor:pointer;transition:.25s}.checkout-btn[_ngcontent-%COMP%]:hover{background:#000}.empty-text[_ngcontent-%COMP%]{text-align:center;margin-top:60px;font-size:24px;opacity:.7}"]})};export{I as CartComponent};
