"use strict";(self.webpackChunkshop_web=self.webpackChunkshop_web||[]).push([[133],{2133:(b,l,s)=>{s.r(l),s.d(l,{EditProductComponent:()=>P});var a=s(2881),d=s(4341),u=s(7993),e=s(1360),p=s(9315),g=s(6241),_=s(4354);const m=()=>["advlist autolink lists link image charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime media table paste code help wordcount"],h=r=>({height:350,menubar:!0,plugins:r,toolbar:"undo redo | blocks | bold italic underline forecolor | alignleft aligncenter alignright alignjustify | bullist numlist | link image | table | removeformat"});function M(r,c){1&r&&(e.j41(0,"div"),e.EFF(1,"Loading..."),e.k0s())}function f(r,c){if(1&r&&(e.j41(0,"div",27),e.EFF(1),e.k0s()),2&r){const t=e.XpG(2);e.R7$(),e.JRh(t.successMessage)}}function C(r,c){if(1&r&&(e.j41(0,"div",28),e.EFF(1),e.k0s()),2&r){const t=e.XpG(2);e.R7$(),e.JRh(t.errorMessage)}}function E(r,c){if(1&r&&(e.j41(0,"option",19),e.EFF(1),e.k0s()),2&r){const t=c.$implicit;e.Y8G("value",t.name),e.R7$(),e.SpI(" ",t.name," ")}}function v(r,c){if(1&r&&e.nrm(0,"img",29),2&r){const t=e.XpG(2);e.Y8G("src",t.previewImage,e.B4B)}}function j(r,c){if(1&r&&e.nrm(0,"img",29),2&r){const t=e.XpG(2);e.Y8G("src",t.product.imageUrl,e.B4B)}}function x(r,c){if(1&r){const t=e.RV6();e.j41(0,"div"),e.DNE(1,f,2,1,"div",2)(2,C,2,1,"div",3),e.j41(3,"form",4),e.bIt("ngSubmit",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.updateProduct())}),e.j41(4,"div",5)(5,"div",6)(6,"label"),e.EFF(7,"Name"),e.k0s(),e.j41(8,"input",7),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o.product.name,n)||(o.product.name=n),e.Njj(n)}),e.k0s()(),e.j41(9,"div",6)(10,"label"),e.EFF(11,"Brand"),e.k0s(),e.j41(12,"input",8),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o.product.brand,n)||(o.product.brand=n),e.Njj(n)}),e.k0s()(),e.j41(13,"div",6)(14,"label"),e.EFF(15,"Category"),e.k0s(),e.j41(16,"select",9),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o.product.categoryId,n)||(o.product.categoryId=n),e.Njj(n)}),e.DNE(17,E,2,2,"option",10),e.k0s()(),e.j41(18,"div",6)(19,"label"),e.EFF(20,"Gender"),e.k0s(),e.j41(21,"select",11),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o.product.gender,n)||(o.product.gender=n),e.Njj(n)}),e.j41(22,"option",12),e.EFF(23,"UNISEX"),e.k0s(),e.j41(24,"option",13),e.EFF(25,"MEN"),e.k0s(),e.j41(26,"option",14),e.EFF(27,"WOMEN"),e.k0s()()(),e.j41(28,"div",6)(29,"label"),e.EFF(30,"Price"),e.k0s(),e.j41(31,"input",15),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o.product.price,n)||(o.product.price=n),e.Njj(n)}),e.k0s()(),e.j41(32,"div",6)(33,"label"),e.EFF(34,"Discount Price"),e.k0s(),e.j41(35,"input",16),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o.product.discountPrice,n)||(o.product.discountPrice=n),e.Njj(n)}),e.k0s()(),e.j41(36,"div",6)(37,"label"),e.EFF(38,"Items Left"),e.k0s(),e.j41(39,"input",17),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o.product.itemsLeft,n)||(o.product.itemsLeft=n),e.Njj(n)}),e.k0s()(),e.j41(40,"div",6)(41,"label"),e.EFF(42,"In Stock"),e.k0s(),e.j41(43,"select",18),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o.product.inStock,n)||(o.product.inStock=n),e.Njj(n)}),e.j41(44,"option",19),e.EFF(45,"Yes"),e.k0s(),e.j41(46,"option",19),e.EFF(47,"No"),e.k0s()()(),e.j41(48,"div",20)(49,"label"),e.EFF(50,"Sizes"),e.k0s(),e.j41(51,"input",21),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o.product.sizes,n)||(o.product.sizes=n),e.Njj(n)}),e.k0s()(),e.j41(52,"div",20)(53,"label"),e.EFF(54,"Colors"),e.k0s(),e.j41(55,"input",22),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o.product.colors,n)||(o.product.colors=n),e.Njj(n)}),e.k0s()(),e.j41(56,"div",20)(57,"label"),e.EFF(58,"Description"),e.k0s(),e.j41(59,"editor",23),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o.product.description,n)||(o.product.description=n),e.Njj(n)}),e.k0s()(),e.j41(60,"div",20)(61,"label"),e.EFF(62,"Product Image"),e.k0s(),e.j41(63,"input",24),e.bIt("change",function(n){e.eBV(t);const o=e.XpG();return e.Njj(o.onFileSelected(n))}),e.k0s(),e.DNE(64,v,1,1,"img",25)(65,j,1,1,"img",25),e.k0s()(),e.j41(66,"button",26),e.EFF(67,"Save Changes"),e.k0s()()()}if(2&r){const t=e.XpG();e.R7$(),e.Y8G("ngIf",t.successMessage),e.R7$(),e.Y8G("ngIf",t.errorMessage),e.R7$(6),e.R50("ngModel",t.product.name),e.R7$(4),e.R50("ngModel",t.product.brand),e.R7$(4),e.R50("ngModel",t.product.categoryId),e.R7$(),e.Y8G("ngForOf",t.categories),e.R7$(4),e.R50("ngModel",t.product.gender),e.R7$(10),e.R50("ngModel",t.product.price),e.R7$(4),e.R50("ngModel",t.product.discountPrice),e.R7$(4),e.R50("ngModel",t.product.itemsLeft),e.R7$(4),e.R50("ngModel",t.product.inStock),e.R7$(),e.Y8G("value",!0),e.R7$(2),e.Y8G("value",!1),e.R7$(5),e.R50("ngModel",t.product.sizes),e.R7$(4),e.R50("ngModel",t.product.colors),e.R7$(4),e.R50("ngModel",t.product.description),e.Y8G("init",e.eq3(20,h,e.lJ4(19,m))),e.R7$(5),e.Y8G("ngIf",t.previewImage),e.R7$(),e.Y8G("ngIf",!t.previewImage&&t.product.imageUrl)}}let P=(()=>{class r{route;productService;categoryService;router;selectedFile=null;previewImage=null;categories=[];id;product={name:"",description:"",brand:"",gender:"UNISEX",sizes:"",colors:"",price:0,discountPrice:0,itemsLeft:0,inStock:!0,imageUrl:"",slug:"",categoryId:null,categoryName:""};loading=!0;successMessage="";errorMessage="";constructor(t,i,n,o){this.route=t,this.productService=i,this.categoryService=n,this.router=o}ngOnInit(){this.id=Number(this.route.snapshot.paramMap.get("id")),this.loadCategories(),this.loadProduct()}loadProduct(){this.productService.getProductById(this.id).subscribe({next:t=>{this.product=t,this.loading=!1},error:()=>{this.errorMessage="Product not found!",this.loading=!1}})}updateProduct(){this.successMessage="",this.errorMessage="",this.product.slug=this.product.name.toLowerCase().replace(/ /g,"-"),this.selectedFile?this.productService.uploadImage(this.selectedFile).subscribe({next:t=>{this.product.imageUrl=t.imageUrl,this.saveUpdate()},error:()=>{this.errorMessage="Error uploading image!"}}):this.saveUpdate(),this.productService.updateProduct(this.id,this.product).subscribe({next:()=>{this.successMessage="Product updated successfully!",setTimeout(()=>{this.router.navigate(["/admin/products"])},1500)},error:()=>{this.errorMessage="Error updating product!"}})}onFileSelected(t){this.selectedFile=t.target.files[0];const i=new FileReader;i.onload=()=>{this.previewImage=i.result},i.readAsDataURL(this.selectedFile)}saveUpdate(){this.productService.updateProduct(this.id,this.product).subscribe({next:()=>{this.successMessage="Product updated successfully!",setTimeout(()=>this.router.navigate(["/admin/products"]),1500)},error:()=>{this.errorMessage="Error updating product!"}})}loadCategories(){this.categoryService.getAll().subscribe(t=>{this.categories=t})}static \u0275fac=function(i){return new(i||r)(e.rXU(p.nX),e.rXU(g.b),e.rXU(_.M),e.rXU(p.Ix))};static \u0275cmp=e.VBU({type:r,selectors:[["app-edit-product"]],decls:4,vars:2,consts:[[1,"page-title"],[4,"ngIf"],["class","alert alert-success",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],[3,"ngSubmit"],[1,"form-grid"],[1,"form-group"],["type","text","name","name","required","",3,"ngModelChange","ngModel"],["type","text","name","brand","required","",3,"ngModelChange","ngModel"],["name","category",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["name","gender",3,"ngModelChange","ngModel"],["value","UNISEX"],["value","MEN"],["value","WOMEN"],["type","number","name","price","required","",3,"ngModelChange","ngModel"],["type","number","name","discountPrice",3,"ngModelChange","ngModel"],["type","number","name","itemsLeft","required","",3,"ngModelChange","ngModel"],["name","inStock",3,"ngModelChange","ngModel"],[3,"value"],[1,"form-group","full-width"],["type","text","name","sizes",3,"ngModelChange","ngModel"],["type","text","name","colors",3,"ngModelChange","ngModel"],["apiKey","4qqexv2l5k4f1ewaj0bplmi9laf4mw63sqgsj7tpz51re5iq","name","description",3,"ngModelChange","ngModel","init"],["type","file",3,"change"],["class","preview",3,"src",4,"ngIf"],[1,"btn-submit"],[1,"alert","alert-success"],[1,"alert","alert-danger"],[1,"preview",3,"src"]],template:function(i,n){1&i&&(e.j41(0,"h2",0),e.EFF(1,"Edit Product"),e.k0s(),e.DNE(2,M,2,0,"div",1)(3,x,68,22,"div",1)),2&i&&(e.R7$(2),e.Y8G("ngIf",n.loading),e.R7$(),e.Y8G("ngIf",!n.loading))},dependencies:[a.MD,a.Sq,a.bT,d.YN,d.qT,d.xH,d.y7,d.me,d.Q0,d.wz,d.BC,d.cb,d.YS,d.vS,d.cV,u.sv,u.xn],styles:[".page-title[_ngcontent-%COMP%]{font-size:26px;font-weight:700;margin-bottom:20px}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:20px}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column}.full-width[_ngcontent-%COMP%]{grid-column:span 2}label[_ngcontent-%COMP%]{font-weight:700;margin-bottom:5px}input[_ngcontent-%COMP%], select[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{padding:10px;border-radius:6px;border:1px solid #ccc}textarea[_ngcontent-%COMP%]{min-height:120px}.btn-submit[_ngcontent-%COMP%]{margin-top:20px;padding:12px 20px;background:#0d6efd;border-radius:8px;color:#fff;border:none;cursor:pointer;font-size:16px}.preview[_ngcontent-%COMP%]{width:120px;height:120px;object-fit:cover;margin-top:10px;border-radius:10px;border:1px solid #ddd}"]})}return r})()}}]);